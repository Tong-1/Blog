<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="keywords" content="welcome"><meta name="descriptioon" content="没事儿,tong-h,Tong-H"><meta name="renderer" content="wekit"><link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/css/public.css"><link rel="stylesheet" href="/css/reset.css"><link rel="stylesheet" href="/css/iconfont.css"><title>Archives [ 没事儿 ]</title><link rel="stylesheet" href="/css/partial/posts.css"><link rel="stylesheet" href="/css/partial/posts.css"><link rel="stylesheet" href="/css/partial/sidebar.css"><link rel="stylesheet" href="/css/archive.css"><link rel="stylesheet" href="/css/index.css"></head><body class="scroll"><link rel="stylesheet" href="/css/partial/header.css"><div class="header"><div class="maxwidth"><div class="nav"><a id="artlist" href="/archives"><i class="iconfont iconArchives"></i><span class="headhid">&nbsp;Archives</span></a><a id="artlist" href="/about"><i class="iconfont iconAbout"></i><span class="headhid">&nbsp;About</span></a><a id="artlist" href="/404"><i class="iconfont iconCommonweal"></i><span class="headhid">&nbsp;Commonweal</span></a></div><div class="search">It's more tiring to stop</div></div></div><div class="line"></div><div class="main"> <div class="maxwidth"><link rel="stylesheet" href="/css/partial/sidebar.css"><div id="sidebar"><div class="info"><img src="/images/user.png" alt="头像"><div><p>没事儿</p></div></div><div class="social"><a href="/archives" title="Home"><i class="iconfont iconHome"></i></a><a href="/atom.xml" title="RSS 源订阅"><i class="iconfont iconsubscribe-1-copy"></i></a><a href="mailto:tongt0232@gmail.com" title="E-Mail"><i class="iconfont iconweibiaoti554"></i></a><a href="https://github.com/tong-h" title="GitHub"><i class="iconfont iconGitHub"></i></a><a href="https://www.jianshu.com/u/20de04cc53de" title="简书"><img src="/images/jianicon-sidebar.png"></a></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/WEB/">WEB</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/rests/">rests</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tool/">tool</a><span class="category-list-count">6</span></li></ul><div class="tags"><a href="/tags/ECharts/" style="font-size: 14px; color: #ffac00">ECharts</a> <a href="/tags/Electron/" style="font-size: 14px; color: #ffac00">Electron</a> <a href="/tags/JSON/" style="font-size: 14px; color: #ffac00">JSON</a> <a href="/tags/angular/" style="font-size: 22px; color: #da8d00">angular</a> <a href="/tags/canvas/" style="font-size: 22px; color: #da8d00">canvas</a> <a href="/tags/cordova/" style="font-size: 30px; color: #b46e00">cordova</a> <a href="/tags/ffmpeg/" style="font-size: 14px; color: #ffac00">ffmpeg</a> <a href="/tags/git/" style="font-size: 14px; color: #ffac00">git</a> <a href="/tags/hexo/" style="font-size: 14px; color: #ffac00">hexo</a> <a href="/tags/http/" style="font-size: 14px; color: #ffac00">http</a> <a href="/tags/markdown/" style="font-size: 14px; color: #ffac00">markdown</a> <a href="/tags/mpvue/" style="font-size: 14px; color: #ffac00">mpvue</a> <a href="/tags/mysql/" style="font-size: 14px; color: #ffac00">mysql</a> <a href="/tags/nginx/" style="font-size: 14px; color: #ffac00">nginx</a> <a href="/tags/nodejs/" style="font-size: 14px; color: #ffac00">nodejs</a> <a href="/tags/npm/" style="font-size: 14px; color: #ffac00">npm</a> <a href="/tags/python/" style="font-size: 14px; color: #ffac00">python</a> <a href="/tags/rests/" style="font-size: 14px; color: #ffac00">rests</a> <a href="/tags/search/" style="font-size: 14px; color: #ffac00">search</a> <a href="/tags/vue/" style="font-size: 14px; color: #ffac00">vue</a> <a href="/tags/原型链/" style="font-size: 14px; color: #ffac00">原型链</a> <a href="/tags/服务器/" style="font-size: 14px; color: #ffac00">服务器</a> <a href="/tags/死磕英语/" style="font-size: 14px; color: #ffac00">死磕英语</a> <a href="/tags/网络爬虫/" style="font-size: 22px; color: #da8d00">网络爬虫</a> <a href="/tags/跨域/" style="font-size: 14px; color: #ffac00">跨域</a></div></div><div class="archive rightside"><div id="list_archives" style="opacity: 0;display:  none"><div class="switch" id="arshow"><i class="iconfont iconArchives"></i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">3</span></li></ul></div><div id="normalposts"><div class="switch" id="poshow"><i class="iconfont iconshijian1"></i></div><article><a class="title" href="/2018/08/24/cordova_设备信息获取/">cordova获取设备信息以及sim卡MSISDN等信息</a><div class="content ellipse"><p></p><p><img src="http://cordova.axuer.com/static/img/cordova_bot.png" alt="示例图片"></p>
<h1 id="设备信息获取"><a href="#设备信息获取" class="headerlink" title="设备信息获取"></a>设备信息获取</h1><p>支持平台：Android、Browser、iOS、Windows、OSX<br>这是cordova官方插件，附上<a href="https://www.npmjs.com/package/cordova-plugin-sim" target="_blank" rel="noopener">官方文档</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">插件安装</span><br><span class="line">cordova plugin add cordova-plugin-device</span><br></pre></td></tr></table></figure></p>
<h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"deviceready"</span>, onDeviceReady, <span class="literal">false</span>)</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">onDeviceReady</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(device.cordova) <span class="comment">// 当前cordova的版本</span></span><br><span class="line">        alert(device.model) <span class="comment">// 设备的模型或产品名称</span></span><br><span class="line">        alert(device.platform)  <span class="comment">// 获取操作系统</span></span><br><span class="line">        alert(device.uuid) <span class="comment">// 设备通用唯一标识uuid</span></span><br><span class="line">        alert(device.version) <span class="comment">// 操作系统版本</span></span><br><span class="line">        alert(device.isVirtual) <span class="comment">// 判断设备是否在虚拟机上运行,返回Boolean</span></span><br><span class="line">        alert(device.serial)  <span class="comment">// 设备序列号</span></span><br><span class="line">        alert(device.serial)  <span class="comment">// 设备制造商</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="sim卡信息获取"><a href="#sim卡信息获取" class="headerlink" title="sim卡信息获取"></a>sim卡信息获取</h1><p>支持平台：Android、iOS、Windows Phone 7 and 8<br>附上<a href="https://www.npmjs.com/package/cordova-plugin-sim" target="_blank" rel="noopener">npm文档</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">插件安装</span><br><span class="line">cordova plugin add cordova-plugin-sim</span><br></pre></td></tr></table></figure></p>
<h2 id="使用方法，更多参数查看文档"><a href="#使用方法，更多参数查看文档" class="headerlink" title="使用方法，更多参数查看文档"></a>使用方法，更多参数查看文档</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"deviceready"</span>, onDeviceReady, <span class="literal">false</span>)</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">onDeviceReady</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">window</span>.plugins.sim.getSimInfo(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">        alert(res.carrierName) <span class="comment">// 供应商 (SPN)</span></span><br><span class="line">        alert(res.countryCode) <span class="comment">// ISO 国家代码[中国是CN]</span></span><br><span class="line">        alert(res.mcc) <span class="comment">// 移动信号国家码</span></span><br><span class="line">        alert(res.mnc) <span class="comment">// 移动网络号码</span></span><br><span class="line">      &#125;, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="string">'error'</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2 id="关于MSISDN获取"><a href="#关于MSISDN获取" class="headerlink" title="关于MSISDN获取"></a>关于MSISDN获取</h2><p>sim插件的phoneNumber这个获取MSISDN（手机号码）的参数还有deviceId、simSerialNumber、subscriptionId等等，官方文档表示了有时只能拿到一个空字符串</p>
<h3 id="原因："><a href="#原因：" class="headerlink" title="原因："></a>原因：</h3><p>MSISDN可以存储在SIM卡上，但大部分电话运营商都不会将MSISDN存储在SIM卡上，有以下一些原因：<br>  动态MSISDN分配：首次使用预付费SIM时，有时会为其分配MSISDN。这意味着网络具有可用的MSISDN池，并在新的预付费SIM上线时分配它们。这意味着当SIM卡出厂时，它们还没有MSISDN，这意味着在发送SIM卡之前无法存储MSISDN。有些网络在一段时间不活动后会过期’MSISDN分配，特别是当它们的可用数量不足时，并将这些数字返回到可用池。<br>  移动号码可携带性：一些国家/地区允许移动用户保留其MSISDN但更改网络。这意味着MSISDN将从用于1个网络的SIM移动到用于另一个网络的SIM。</p>
<p>因此SIM上的MSISDN条目通常为空，用户可以在SIM卡上存储MSISDN或者任意数字<br>所以MSISDN通常为空，但如果你获取到了也是因为用户在设备中设置“我的电话号码”什么的所以也并不保证一定正确</p>
<p>可能的方法：通过WAP / WEB，当移动运营商在标题中包含MSISDN时（你可以做一些webview技巧来查看标题是通过的 - 但是你只看到这些如果是网络支持它，如果用户在移动数据上 - 即如果用户在WiFi上，它将无法工作</p>
<p>来源:<a href="https://stackoverflow.com/questions/10695601/msisdn-is-it-a-sim-card-data-why-all-the-provided-function-from-blackberry-a" target="_blank" rel="noopener">https://stackoverflow.com/questions/10695601/msisdn-is-it-a-sim-card-data-why-all-the-provided-function-from-blackberry-a</a></p>
<p>欢迎留言交流  (´▽`ʃ♡ƪ)</p>
<p></p></div><div class="meta"><i class="iconfont iconshijian1">2018-08-24 11:25</i></div></article><article><a class="title" href="/2018/08/23/markdown/">markdown语法(备忘)</a><div class="content ellipse"><p></p><h2 id="转义"><a href="#转义" class="headerlink" title="转义"></a>转义</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">特殊符号使用 \ 转义，例 \* \# \&gt;</span><br></pre></td></tr></table></figure>
<h2 id="字体颜色"><a href="#字体颜色" class="headerlink" title="字体颜色"></a>字体颜色</h2><font face="黑体">我是黑体字</font><br><font face="微软雅黑">我是微软雅黑</font><br><font face="STCAIYUN">我是华文彩云</font><br><font color="#bb1509" size="4" face="黑体">color=#0099ff size=72 face=”黑体”</font><br><font color="#bb1509" size="72">color=#00ffff</font><br><font color="gray" size="72">color=gray</font>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">"黑体"</span>&gt;</span>我是黑体字<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">"微软雅黑"</span>&gt;</span>我是微软雅黑<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">"STCAIYUN"</span>&gt;</span>我是华文彩云<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">#0099ff</span> <span class="attr">size</span>=<span class="string">7</span> <span class="attr">face</span>=<span class="string">"黑体"</span>&gt;</span>color=#0099ff size=72 face="黑体"<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">#00ffff</span> <span class="attr">size</span>=<span class="string">72</span>&gt;</span>color=#00ffff<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">gray</span> <span class="attr">size</span>=<span class="string">72</span>&gt;</span>color=gray<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1535269125851&amp;di=5b30256aeac0e1016d165ded3ccaa568&amp;imgtype=0&amp;src=http%3A%2F%2Fnote.youdao.com%2Fiyoudao%2Fwp-content%2Fuploads%2F2016%2F09%2F8881.jpg" alt="示例图片"></p>
<p><a href="https://www.appinn.com/markdown/index.html" target="_blank" rel="noopener">官方文档</a></p>
<h2 id="空格"><a href="#空格" class="headerlink" title="空格"></a>空格</h2><p>半方大的空白&ensp;或&#8194;<br>全方大的空白&emsp;或&#8195;<br>不断行的空白格&nbsp;或&#160;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">半方大的空白&amp;ensp;或&amp;#8194;</span><br><span class="line">全方大的空白&amp;emsp;或&amp;#8195;</span><br><span class="line">不断行的空白格&amp;nbsp;或&amp;#160;</span><br></pre></td></tr></table></figure>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">少量代码使用 ` 一个反引号包裹</span><br><span class="line">多行代码使用三个反引号包裹</span><br></pre></td></tr></table></figure>
<p>使用三个反引号包裹并指定语言</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">'hello world'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>支持的语言：1c, abnf, accesslog, actionscript, ada, apache, applescript, arduino, armasm, asciidoc, aspectj, autohotkey, autoit, avrasm, awk, axapta, bash, basic, bnf, brainfuck, cal, capnproto, ceylon, clean, clojure, clojure-repl, cmake, coffeescript, coq, cos, cpp, crmsh, crystal, cs, csp, css, d, dart, delphi, diff, django, dns, dockerfile, dos, dsconfig, dts, dust, ebnf, elixir, elm, erb, erlang, erlang-repl, excel, fix, flix, fortran, fsharp, gams, gauss, gcode, gherkin, glsl, go, golo, gradle, groovy, haml, handlebars, haskell, haxe, hsp, htmlbars, http, hy, inform7, ini, irpf90, java, javascript, json, julia, kotlin, lasso, ldif, leaf, less, lisp, livecodeserver, livescript, llvm, lsl, lua, makefile, markdown, mathematica, matlab, maxima, mel, mercury, mipsasm, mizar, mojolicious, monkey, moonscript, n1ql, nginx, nimrod, nix, nsis, objectivec, ocaml, openscad, oxygene, parser3, perl, pf, php, pony, powershell, processing, profile, prolog, protobuf, puppet, purebasic, python, q, qml, r, rib, roboconf, rsl, ruby, ruleslanguage, rust, scala, scheme, scilab, scss, smali, smalltalk, sml, sqf, sql, stan, stata, step21, stylus, subunit, swift, taggerscript, tap, tcl, tex, thrift, tp, twig, typescript, vala, vbnet, vbscript, vbscript-html, verilog, vhdl, vim, x86asm, xl, xml, xquery, yaml, zephir</p>
<h2 id="字体大小"><a href="#字体大小" class="headerlink" title="字体大小"></a>字体大小</h2><h1 id="1号"><a href="#1号" class="headerlink" title="1号"></a>1号</h1><h2 id="2号"><a href="#2号" class="headerlink" title="2号"></a>2号</h2><h3 id="3号"><a href="#3号" class="headerlink" title="3号"></a>3号</h3><h4 id="4号"><a href="#4号" class="headerlink" title="4号"></a>4号</h4><h5 id="5号"><a href="#5号" class="headerlink" title="5号"></a>5号</h5><h6 id="6号"><a href="#6号" class="headerlink" title="6号"></a>6号</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 1号</span><br><span class="line">## 2号</span><br><span class="line">### 3号</span><br><span class="line">#### 4号</span><br><span class="line">##### 5号</span><br><span class="line">###### 6号</span><br></pre></td></tr></table></figure>
<h2 id="字体着重"><a href="#字体着重" class="headerlink" title="字体着重"></a>字体着重</h2><p><strong>这是加粗的文字</strong><br><em>这是倾斜的文字</em>`<br><strong><em>这是斜体加粗的文字</em></strong><br><del>这是加删除线的文字</del></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">**这是加粗的文字**</span><br><span class="line">*这是倾斜的文字*`</span><br><span class="line">***这是斜体加粗的文字***</span><br><span class="line">~~这是加删除线的文字~~</span><br></pre></td></tr></table></figure>
<h2 id="字体缩进"><a href="#字体缩进" class="headerlink" title="字体缩进"></a>字体缩进</h2><blockquote>
<p>这是引用的内容</p>
<blockquote>
<p>这是引用的内容</p>
<blockquote>
<blockquote>
<blockquote>
<p>这是引用的内容</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;这是引用的内容</span><br><span class="line">&gt;&gt;这是引用的内容</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;这是引用的内容</span><br></pre></td></tr></table></figure>
<h2 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">三个以上的 - 或者 * ,效果一样</span><br><span class="line">***</span><br></pre></td></tr></table></figure>
<hr>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line">## 图片引用</span><br><span class="line"></span><br><span class="line">``` text</span><br><span class="line">![图片alt](图片地址 &apos;&apos;图片title&apos;&apos;)</span><br></pre></td></tr></table></figure>
<h2 id="超链接"><a href="#超链接" class="headerlink" title="超链接"></a>超链接</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[百度](http://baidu.com)</span><br></pre></td></tr></table></figure>
<h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><ul>
<li>列表</li>
</ul>
<p>1.列表内容<br>2.列表内容<br>3.列表内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">无序列表，使用- + *效果一样</span><br><span class="line">- 列表</span><br><span class="line">+ 列表</span><br><span class="line">* 列表</span><br><span class="line"></span><br><span class="line">有序列表</span><br><span class="line">1.列表内容</span><br><span class="line">2.列表内容</span><br><span class="line">3.列表内容</span><br><span class="line"></span><br><span class="line">注意：符号跟内容之间要有一个空格</span><br></pre></td></tr></table></figure>
<h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><table>
<thead>
<tr>
<th>表头</th>
<th style="text-align:center">表头</th>
<th style="text-align:right">表头</th>
</tr>
</thead>
<tbody>
<tr>
<td>内容</td>
<td style="text-align:center">内容</td>
<td style="text-align:right">内容</td>
</tr>
<tr>
<td>内容</td>
<td style="text-align:center">内容</td>
<td style="text-align:right">内容</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">表头|表头|表头</span><br><span class="line">---|:--:|---:</span><br><span class="line">内容|内容|内容</span><br><span class="line">内容|内容|内容</span><br><span class="line"></span><br><span class="line">| 左对齐标题 | 右对齐标题 | 居中对齐标题 |</span><br><span class="line">| :------| ------: | :------: |</span><br><span class="line"></span><br><span class="line">表格内换行使用 &lt;/br&gt; 标签</span><br></pre></td></tr></table></figure>
<h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><p><a href="http://baidu.com" target="_blank" rel="noopener">百度</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[百度](http://baidu.com)</span><br></pre></td></tr></table></figure>
<p></p></div><div class="meta"><i class="iconfont iconshijian1">2018-08-23 18:18</i></div></article><article><a class="title" href="/2018/08/22/hexo/">关于hexo的常用命令(备忘)</a><div class="content ellipse"><p></p><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><p><a href="https://hexo.io/zh-cn/api/" target="_blank" rel="noopener">官方文档</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ git clone &apos;远程仓库&apos; themes/ &apos;本地文件名称&apos;</span><br><span class="line">hexo s 启动服务</span><br><span class="line">hexo clean  清除缓存文件 (db.json) 和已生成的静态文件 (public)</span><br><span class="line">hexo g  部署之前预先生成静态文件</span><br><span class="line">hexo d  部署</span><br><span class="line"></span><br><span class="line">hexo new &lt;title&gt; 新建一篇文章</span><br><span class="line">hexo new draft &lt;title&gt;  新建一篇草稿</span><br><span class="line">hexo publish &lt;title&gt; 将草稿移入posts文件夹</span><br><span class="line"></span><br><span class="line">图片上传插件</span><br><span class="line">npm install hexo-asset-image --save</span><br><span class="line"></span><br><span class="line">代码上传到github所需要的依赖包</span><br><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<p>hexo部署报错：The file will have its original line endings in your working directory.</p>
<ul>
<li>删除.deploy_git文件夹</li>
<li>运行 git config –global core.autocrlf false</li>
<li>正常流程 hexo clean / hexo g / hexo d</li>
</ul>
<p></p></div><div class="meta"><i class="iconfont iconshijian1">2018-08-22 18:24</i></div></article><article><a class="title" href="/2018/08/22/python_selenium/">python爬虫之selenium自动化测试让你爬虫更像用户</a><div class="content ellipse"><p></p><p>全程序自动化操作<br><img src="/2018/08/22/python_selenium/selenium.gif" alt="demo效果"></p>
<p>先科普一下selenium，这是一个用于Web应用程序测试的工具，支持多种浏览器多种语言</p>
<p>框架底层使用JavaScript模拟真实用户对浏览器进行操作，Selenium测试直接运行在浏览器中，代码执行时，可以自动打开浏览器/表单输入/按钮点击，就像真实用户在操作的一样</p>
<p>真真是反爬虫的一大神器啊</p>
<p>先附上文档了解一些基础知识：<a href="https://selenium-python.readthedocs.io/index.html" target="_blank" rel="noopener">官方文档</a><a href="https://selenium-python-zh.readthedocs.io/en/latest/installation.html" target="_blank" rel="noopener">中文文档</a></p>
<h1 id="关于安装"><a href="#关于安装" class="headerlink" title="关于安装"></a>关于安装</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmd命令：pip3 install selenium</span><br></pre></td></tr></table></figure>
<p>下载谷歌驱动安装：<a href="https://sites.google.com/a/chromium.org/chromedriver/downloads" target="_blank" rel="noopener">https://sites.google.com/a/chromium.org/chromedriver/downloads</a> </p>
<p>放在谷歌文件夹C:\Program Files (x86)\Google\Chrome\Application下再把这路径加入环境变量</p>
<h1 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h1><p><em>Xpath是非常强大的元素查找方式，它可以定位到页面上的任意元素</em></p>
<p>我这里只介绍了一些今天这个实例会用到的</p>
<h2 id="首先先了解一下它的一些语法"><a href="#首先先了解一下它的一些语法" class="headerlink" title="首先先了解一下它的一些语法"></a><em>首先先了解一下它的一些语法</em></h2><p>// ： 相对路径，以这个开头表示从寻找文档的根节点开始查找元素，若出现在xpath路径中则表示寻找父节点下任意符合条件的子节点，不管嵌套了多少层级<br>/：绝对路径，表示寻找父节点下的第一层子元素也就是直接子元素<br>“//标签名[@属性名=’属性值’]”：表示从根目录查找和标签名、属性值相匹配的元素<br>几乎所有的Xpath路径都是以上面3种方法来组合的</p>
<h2 id="精准定位"><a href="#精准定位" class="headerlink" title="精准定位"></a>精准定位</h2><p>以下面这个百度文库这段html举例</p>
<p><img src="http://pe5zctnu4.bkt.clouddn.com/selenium.PNG" alt="shili"></p>
<p>要获取输入框怎么写，写法不只一种哈，这地方你也可以直接使用input的id获取元素（一个页面正常来讲不会有相同的id）</p>
<p>input = browser.find_element(By.XPATH, “//form[@name=’ftop’]//input[@id=’kw’]”)</p>
<p>上面这行是用的是find_element是查找单个元素，api在下面可以先看下</p>
<p>表示从根目录查找第一个匹配路径 name为flop的form标签 ，找到这个元素之后再去他所有子元素里面查找id为kw的input框</p>
<p>假设这个页面有两个name为ftop的form标签（name一样的form标签讲道理一个页面是不会有两个现在只是假设，有可能你会遇到class名一样的div标签）</p>
<p>那么获取第二个form标签：”//form[@name=’ftop’][2]//input[@id=’kw’]”, 就在大括号后面加上他的索引，索引是从1开始的</p>
<h2 id="模糊定位"><a href="#模糊定位" class="headerlink" title="模糊定位"></a>模糊定位</h2><p>contains关键字：input = browser.find_element(By.XPATH, “//input[contains(@id, ‘kw’)]”)<br>表示寻找页面中id属性值包含kw所有input元素</p>
<p>text关键字：input = browser.find_element(By.XPATH, “//button[contains(text(), ‘搜索’)]”)<br>表示寻找页面中文字中包含有搜索的所有button元素</p>
<p>starts-with关键字：input = browser.find_element(By.XPATH, “//a[starts-with(@href,’http://‘)]”)<br>表示寻找页面中href属性以http://开头的a标签</p>
<p>ends-with关键字：input = browser.find_element(By.XPATH, “//a[ends-with(@href,’com’)]”)<br>表示寻找页面中href属性以’com’结尾的a标签<br>关于ends-widh我在使用的时候会报错提示语法不正确而且网上关于ends-with介绍也很少所以我没有找到原因如果大家知道欢迎留言告诉我不胜感激 (´▽`ʃ♡ƪ)</p>
<p><em>这是一个简单的关于用selenium和xpath来做模糊查询的小实例</em><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">chrome_options = Options()</span><br><span class="line"></span><br><span class="line">chrome_options.add_argument(<span class="string">"--headless"</span>)</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome(chrome_options=chrome_options)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开百度网址</span></span><br><span class="line"></span><br><span class="line">browser.get(<span class="string">"https://www.baidu.com/"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取第一个http链接</span></span><br><span class="line"></span><br><span class="line">element_contains = browser.find_element(By.XPATH, <span class="string">"//a[contains(@href, 'http://')]"</span>)</span><br><span class="line"></span><br><span class="line">print(element_contains.text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取第一个包含文字中包含'地图'的a标签</span></span><br><span class="line">element_text = browser.find_element(By.XPATH, <span class="string">"//a[contains(text(), '地图')]"</span>)</span><br><span class="line"></span><br><span class="line">print(element_text.text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取第一个文字以'贴'开头的a标签</span></span><br><span class="line">element_starts = browser.find_element(By.XPATH, <span class="string">"//a[starts-with(text(), '贴')]"</span>)</span><br><span class="line"></span><br><span class="line">print(element_starts.text)</span><br><span class="line"></span><br><span class="line">browser.close()</span><br></pre></td></tr></table></figure></p>
<h2 id="selenium的一些常用api"><a href="#selenium的一些常用api" class="headerlink" title="selenium的一些常用api"></a>selenium的一些常用api</h2><p><em>find_element和find_elements的使用</em></p>
<p>browser.find_element(By.XPATH, ‘//button[text()=”Some text”]’)  //单个元素获取</p>
<p>browser.find_elements(By.XPATH, ‘//button’) //多个元素获取</p>
<p>ID = “id”<br>XPATH = “xpath”<br>LINK_TEXT = “link text”<br>PARTIAL_LINK_TEXT = “partial link text”<br>NAME = “name”<br>TAG_NAME = “tag name”<br>CLASS_NAME = “class name”<br>CSS_SELECTOR = “css selector”</p>
<p><em>单个元素选取（多个元素选取：就是在element后面加一个s，比如find_elements_by_id）：</em></p>
<p>find_element_by_id<br>find_element_by_name<br>find_element_by_xpath<br>find_element_by_link_text<br>find_element_by_partial_link_text<br>find_element_by_tag_name<br>find_element_by_class_name<br>find_element_by_css_selector</p>
<p><em>获取到标签之后的界面交互：</em></p>
<p>input.send_keys(“输入中”)<br>input.clear()  清空输入框<br>button.click()  按钮点击</p>
<p><em>常用的控制浏览器的api：</em></p>
<p>browser.back() 浏览器后退<br>browser.forward() 浏览器前进<br>browser.get(“<a href="https://www.zhihu.com/explore&quot;" target="_blank" rel="noopener">https://www.zhihu.com/explore&quot;</a>) 打开页面<br>browser.execute_script(“alert(‘To Button’)”)  执行js代码<br>print(browser.window_handles) 所有的标签<br>browser.switch_to_window(browser.window_handles[1]) 切换到指定标签页<br>browser.close() 关闭当前标签页</p>
<h1 id="代码实例"><a href="#代码实例" class="headerlink" title="代码实例"></a>代码实例</h1><h2 id="关于页面模块引入"><a href="#关于页面模块引入" class="headerlink" title="关于页面模块引入"></a>关于页面模块引入</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 引入浏览器驱动</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 这里我们需要引入浏览器内核才可以使用浏览器的无头模式，这里我引入的是chrome</span></span><br><span class="line"><span class="comment"># Gecko：是Firefox浏览器的内核</span></span><br><span class="line"><span class="comment"># Trident：是IE浏览器的内核</span></span><br><span class="line"><span class="comment"># Blink：是webkit的一个分支版本，由google开发</span></span><br><span class="line"><span class="comment"># 关于什么是无头模式：即headless browser，是一种没有界面的浏览器，主要是用作爬虫，用以捕捉Web上的各类数据</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 主要用于使用两个私有方法find_element和find_elements</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 调用键盘api</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.keys <span class="keyword">import</span> Keys</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用于时间延迟</span></span><br><span class="line"><span class="keyword">import</span> time</span><br></pre></td></tr></table></figure>
<h2 id="功能代码"><a href="#功能代码" class="headerlink" title="功能代码"></a>功能代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">chrome_options = Options()</span><br><span class="line"></span><br><span class="line">chrome_options.add_argument(<span class="string">"--headless"</span>)</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开页面</span></span><br><span class="line">browser.get(<span class="string">"https://wenku.baidu.com/"</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取搜索输入框</span></span><br><span class="line">input = browser.find_element(ID, <span class="string">'kw'</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 输入内容</span></span><br><span class="line">input.send_keys(<span class="string">"IT/计算机"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模拟回车</span></span><br><span class="line">input.send_keys(Keys.ENTER) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取'我知道了'按钮</span></span><br><span class="line">btn = browser.find_element(By.XPATH, <span class="string">"//div[@class='new-filter-box fc5']//span[@class='btn-know']"</span>)</span><br><span class="line"></span><br><span class="line">btn.click()</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">1</span>) <span class="comment"># 时间延迟</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 点击列表的第一条数据</span></span><br><span class="line">btn = browser.find_element(By.XPATH, <span class="string">"//div[@class='main']//dl[1]//a[1]"</span>)</span><br><span class="line"></span><br><span class="line">btn.click()</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将browser页面切换至当前页面</span></span><br><span class="line">browser.switch_to_window(browser.window_handles[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭当前页面</span></span><br><span class="line">browser.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换至第一个页面</span></span><br><span class="line">browser.switch_to_window(browser.window_handles[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 点击列表的第二条数据</span></span><br><span class="line">btn = browser.find_element(By.XPATH, <span class="string">"//div[@class='main']//dl[2]//a[1]"</span>)</span><br><span class="line"></span><br><span class="line">btn.click()</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 视图切换至第一个页面</span></span><br><span class="line">browser.switch_to_window(browser.window_handles[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 去往百度页面</span></span><br><span class="line">browser.get(<span class="string">"https://baidu.com/"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印所有标签</span></span><br><span class="line">print(browser.window_handles)</span><br></pre></td></tr></table></figure>
<p>开启无头模式<br>只需要修改一行代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">browser = webdriver.Chrome(chrome_options=chrome_options)</span><br></pre></td></tr></table></figure></p>
<p>欢迎留言交流  (´▽`ʃ♡ƪ)</p>
<p></p></div><div class="meta"><i class="iconfont iconshijian1">2018-08-22 11:15</i></div></article><article><a class="title" href="/2018/08/20/cordova_定位/">cordova定位 + 仿钉钉打卡功能</a><div class="content ellipse"><p></p><p>最近在研究hybridApp，使用vue+cordova，现在需要实现一个钉钉打卡的功能<br>大致要实现这4个需求：地图显示、定位、地图覆盖效果、距离测量</p>
<h1 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h1><p>定位相对而言比较复杂所以优先考虑，关于定位，我尝试了3种办法</p>
<p>第一个尝试了cordova自带的插件，结果是报错：code：2，message：network provider is not available，原因是新版的插件已经删掉了关于Android版定位的代码，改为基于系统浏览器(chrome内核)进行定位，但经测试发现因为国内网络原因根本无法定位</p>
<p>第二个是用的高德地图的JavaScript API，定位虽然成功但是定位和实际位置有几百米的误差这个肯定不行</p>
<p>第三个是用的cordova的baidumaplocation插件，误差在几十米之间还可以接受</p>
<p>首先附上<a href="https://github.com/aruis/cordova-plugin-baidumaplocation" target="_blank" rel="noopener">插件github的连接</a></p>
<p>第一步你得先去<a href="http://lbsyun.baidu.com/apiconsole/key" target="_blank" rel="noopener">百度</a>创建一个应用</p>
<h2 id="创建android应用签名文件-查看SHA1"><a href="#创建android应用签名文件-查看SHA1" class="headerlink" title="创建android应用签名文件/查看SHA1"></a>创建android应用签名文件/查看SHA1</h2><p>开发版本<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd .android 进入  C:\Users\FLTD-Y01\.android&gt;</span><br><span class="line"></span><br><span class="line">调试版本使用debug.keystore，命令为：keytool -list -v -keystore debug.keystore。</span><br><span class="line"></span><br><span class="line">提示输入密钥库密码，调试版本默认密码是: android</span><br></pre></td></tr></table></figure></p>
<p>发布版本<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">建立签名文件</span><br><span class="line">$ keytool -genkey -v -keystore key.keystore -alias key -keyalg RSA -validity 365</span><br></pre></td></tr></table></figure></p>
<p>回车后会让你输入名字公司什么的，按照提示继续就好</p>
<p>执行完成后会在文件夹内创建一个key.keystore的签名文件</p>
<p>然后就能够看到md5、SHA1什么的了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">查看签名信息</span><br><span class="line">$ keytool -list -v -keystore key.keystore</span><br></pre></td></tr></table></figure>
<h2 id="安装baidumaplocation插件"><a href="#安装baidumaplocation插件" class="headerlink" title="安装baidumaplocation插件"></a>安装baidumaplocation插件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">安装baidumaplocation插件</span><br><span class="line">$ cordova plugin add cordova-plugin-baidumaplocation --variable ANDROID_KEY=&quot;你的key&quot; --variable IOS_KEY=&quot;value&quot; --save</span><br><span class="line"> 只需要Android端或者IOS端，可以只填写一个相应的key，另外一个你还是得填点什么，不然你懂的</span><br></pre></td></tr></table></figure>
<h2 id="炒鸡简单的用法上代码"><a href="#炒鸡简单的用法上代码" class="headerlink" title="炒鸡简单的用法上代码"></a>炒鸡简单的用法上代码</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ baidumap_location.getCurrentPosition (<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">$   <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(result))</span><br><span class="line">$ &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">$   <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(error))</span><br><span class="line">$ &#125;)</span><br></pre></td></tr></table></figure>
<p>温馨提示：只有在手机上才能获取比较准确的信息，所以最好真机测试</p>
<h2 id="地图显示、覆盖物效果、距离计算"><a href="#地图显示、覆盖物效果、距离计算" class="headerlink" title="地图显示、覆盖物效果、距离计算"></a>地图显示、覆盖物效果、距离计算</h2><p>除了定位以外的其他功能我都用的是JavaScript API</p>
<p>那么第一步是去<a href="http://lbsyun.baidu.com/apiconsole/key" target="_blank" rel="noopener">百度</a>创建一个浏览器端类型的应用</p>
<p>然后你会得到一个key，然后在index引用百度地图API文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"http://api.map.baidu.com/api?v=2.0&amp;ak=您的密钥"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="最后上代码"><a href="#最后上代码" class="headerlink" title="最后上代码"></a>最后上代码</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">that.bmap = <span class="keyword">new</span> BMap.Map(<span class="string">"allmap"</span>) <span class="comment">// 新建地图实例</span></span><br><span class="line"><span class="keyword">let</span> location = <span class="keyword">new</span> BMap.Point(enterprise1, enterprise2) <span class="comment">// 新建坐标，参数为企业坐标</span></span><br><span class="line">that.bmap.centerAndZoom(location, <span class="number">16</span>) <span class="comment">//设置企业坐标为中心点坐标</span></span><br><span class="line"><span class="keyword">let</span> circle = <span class="keyword">new</span> BMap.Circle(location, <span class="number">500</span>, &#123;<span class="attr">strokeColor</span>:<span class="string">"blue"</span>, <span class="attr">strokeWeight</span>:<span class="number">2</span>, <span class="attr">strokeOpacity</span>:<span class="number">0.5</span>&#125;) <span class="comment">// 创建地图圆形覆盖效果</span></span><br><span class="line">that.bmap.addOverlay(circle)  <span class="comment">// 增加效果 </span></span><br><span class="line"><span class="keyword">let</span> pointB = <span class="keyword">new</span> BMap.Point(result.longitude, result.latitude) <span class="comment">// 新建点坐标，参数为定位获取到的坐标</span></span><br><span class="line"><span class="built_in">console</span>.log((that.bmap.getDistance(location, pointB)).toFixed(<span class="number">2</span>)) <span class="comment">// 计算距离，小于500可以打卡，反之则是超出范围</span></span><br></pre></td></tr></table></figure>
<h2 id="关于报错"><a href="#关于报错" class="headerlink" title="关于报错"></a>关于报错</h2><p>如果Android版获取到的信息是：<br>{<br>    “locType”: 505,<br>    “locTypeDescription”: “NetWork location failed because baidu location service check the key is unlegal, please check the key in AndroidManifest.xml !”,<br>    “latitude”: 5e-324,<br>    “longitude”: 5e-324,<br>    “radius”: 0,<br>    “userIndoorState”: -1,<br>    “direction”: -1<br>}<br>这个坑我是踩了，不管你信息是否获取成功过，只要出现了上面的信息就说明Key有问题</p>
<ul>
<li>检查第一步创建的百度Android应用</li>
<li>检查下生成的AndroidManifest.xml文件里面是否有如下信息<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;service android:enabled=<span class="string">"true"</span> android:name=<span class="string">"com.baidu.location.f"</span> android:process=<span class="string">":remote"</span>&gt;</span><br><span class="line">&lt;<span class="regexp">/service&gt;</span></span><br><span class="line"><span class="regexp">&lt;meta-data android:name="com.baidu.lbsapi.API_KEY" android:value="abcdefghijklmn" /</span>&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>然后重新安装</p>
<p>欢迎留言交流  (´▽`ʃ♡ƪ)</p>
<p></p></div><div class="meta"><i class="iconfont iconshijian1">2018-08-20 18:10</i></div></article><article><a class="title" href="/2018/08/15/vue_ECharts4-x/">vue+ECharts4.x地图下钻/散点分布以及热力图</a><div class="content ellipse"><p></p><p>最近用到了echarts，实现三个功能国家到省级的地图下钻和散点分布以及热力图显示</p>
<p>网上资料蛮少的，记录一个给后面的小伙伴一些参考</p>
<h1 id="demo效果如下"><a href="#demo效果如下" class="headerlink" title="demo效果如下"></a>demo效果如下</h1><p>中国地图下显示为热力图，显示精确分布点只是demo所以数据是自己写的假数据只有几条<br>点击进入省份地图，在地图之外还有那个小箭头是数据的原因不是bug改下数据就好<br><img src="/2018/08/15/vue_ECharts4-x/map.gif" alt="demo效果"></p>
<p>先上官网<a href="http://echarts.baidu.com/option.html#title，表白echarts，文档真的很详细，良心官网" target="_blank" rel="noopener">http://echarts.baidu.com/option.html#title，表白echarts，文档真的很详细，良心官网</a></p>
<p>demo代码如下<br>下钻到市级县级道理也是如此<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">mapfun(name)&#123; </span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.chartNum)</span><br><span class="line">      <span class="comment">// 注意文件路径 </span></span><br><span class="line">      <span class="keyword">this</span>.$http.get(<span class="string">'static/province/'</span>+name+<span class="string">'.json'</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123; </span><br><span class="line">        echarts.registerMap(name, res.body)</span><br><span class="line">        <span class="keyword">let</span> data = [];</span><br><span class="line">        res.body.features.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            data.push(&#123;</span><br><span class="line">                name:item.properties.name</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">this</span>.chartNum !== <span class="number">1</span> ? <span class="keyword">this</span>.myChart.dispose() : <span class="string">''</span>  <span class="comment">// 创建新实例之前一定要销毁上一个实例，否则重复多次点击无数的实例导致内存爆满</span></span><br><span class="line">        <span class="keyword">this</span>.chartNum++</span><br><span class="line">        <span class="keyword">this</span>.myChart = echarts.init(<span class="built_in">document</span>.getElementById(<span class="string">'myChart'</span>))</span><br><span class="line">        <span class="keyword">this</span>.myChart.showLoading()</span><br><span class="line">        <span class="keyword">this</span>.myChart.setOption(&#123;</span><br><span class="line">          title: &#123; <span class="comment">// 标题</span></span><br><span class="line">            text: <span class="string">"分布图"</span>,</span><br><span class="line">            left: <span class="string">"center"</span>,</span><br><span class="line">            padding: <span class="number">30</span>,</span><br><span class="line">            textStyle: &#123;</span><br><span class="line">              color: <span class="string">"#fff"</span>,</span><br><span class="line">              fontSize: <span class="string">"30"</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          visualMap: &#123; <span class="comment">// 热力图颜色显示</span></span><br><span class="line">            <span class="keyword">default</span>:<span class="string">'piecewise '</span>,</span><br><span class="line">            <span class="keyword">default</span>: <span class="number">5</span>,</span><br><span class="line">            calculable:<span class="literal">true</span>,</span><br><span class="line">            textStyle:&#123;</span><br><span class="line">              color: <span class="string">'#fef420'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            inRange: &#123;</span><br><span class="line">                color: [<span class="string">'#fef420'</span>, <span class="string">'#df383e'</span>,<span class="string">'#379fdf'</span>],</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          geo: [&#123; <span class="comment">// 地图</span></span><br><span class="line">            type: <span class="string">'map'</span>,  </span><br><span class="line">            map: name,  <span class="comment">// 地区名字，重要参数</span></span><br><span class="line">            itemStyle: &#123;</span><br><span class="line">                areaColor: <span class="string">"#d7bed9"</span>,</span><br><span class="line">                borderColor: <span class="string">"#111"</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            emphasis: &#123;</span><br><span class="line">              label:&#123;</span><br><span class="line">                show: <span class="literal">false</span></span><br><span class="line">              &#125;,</span><br><span class="line">              itemStyle: &#123;</span><br><span class="line">                areaColor: <span class="string">"#f5d4f8"</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            data: data,  <span class="comment">// 数据，重要参数</span></span><br><span class="line">            label: &#123;    <span class="comment">// 标签的显示</span></span><br><span class="line">              normal: &#123; <span class="attr">show</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">              emphasis: &#123; <span class="attr">show</span>: <span class="literal">true</span> &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;],</span><br><span class="line">          series: [&#123; <span class="comment">// 散点分布</span></span><br><span class="line">              roam: <span class="literal">true</span>,</span><br><span class="line">              type: name === <span class="string">'china'</span> ? <span class="string">"heatmap"</span> : <span class="string">"scatter"</span>, <span class="comment">// 中国地图下显示热力图，省级地图下显示精确分布点</span></span><br><span class="line">              coordinateSystem: <span class="string">"geo"</span>,</span><br><span class="line">              data: [[<span class="string">'116.347927'</span>, <span class="string">'39.948795'</span>, <span class="number">100</span>],</span><br><span class="line">                    [<span class="string">'100.06376'</span>, <span class="string">'30.554698'</span>, <span class="number">75</span>],</span><br><span class="line">                    [<span class="string">'104.05325'</span>, <span class="string">'29.646273'</span>, <span class="number">50</span>],[<span class="string">'104.05325'</span>, <span class="string">'25.646273'</span>, <span class="number">25</span>],[<span class="string">'94.05325'</span>, <span class="string">'30.646273'</span>, <span class="number">1</span>]],</span><br><span class="line">              blurSize: <span class="number">20</span>,</span><br><span class="line">              symbolSize: <span class="number">20</span>,</span><br><span class="line">              symbol: <span class="string">'arrow'</span>,  </span><br><span class="line">              minOpacity: <span class="number">0.1</span>,</span><br><span class="line">              maxOpacity: <span class="number">1</span>,</span><br><span class="line">          &#125;]</span><br><span class="line">          </span><br><span class="line">        &#125;) </span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123; </span><br><span class="line">           <span class="keyword">this</span>.myChart.hideLoading()</span><br><span class="line">        &#125;, <span class="number">1000</span>)</span><br><span class="line">        <span class="keyword">this</span>.myChart.on(<span class="string">'click'</span>, params =&gt; &#123; <span class="comment">// 点击函数</span></span><br><span class="line">          name === <span class="string">'china'</span> ? <span class="keyword">this</span>.mapfun(params.name) : <span class="keyword">this</span>.mapfun(<span class="string">'china'</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<p>欢迎留言交流  (´▽`ʃ♡ƪ)</p>
<p></p></div><div class="meta"><i class="iconfont iconshijian1">2018-08-15 09:35</i></div></article><article><a class="title" href="/2018/08/09/python_mysql/">python操作mysql/mysql增删查改语句</a><div class="content ellipse"><p></p><h1 id="PyMySQL安装-方法介绍"><a href="#PyMySQL安装-方法介绍" class="headerlink" title="PyMySQL安装/方法介绍"></a>PyMySQL安装/方法介绍</h1><p>PyMySQL是由python编写的，速度上比不上 MySQLdb，但是他安装非常方便同时也兼容 MySQL-python</p>
<p>pip install pymssql</p>
<h1 id="基本方法介绍"><a href="#基本方法介绍" class="headerlink" title="基本方法介绍"></a>基本方法介绍</h1><p>close():关闭此connect对象<br>commit():提交当前事务<br>rollback():取消当前事务<br>cursor():创建游标对象</p>
<h2 id="关于游标"><a href="#关于游标" class="headerlink" title="关于游标"></a>关于游标</h2><p>游标是一段私有的SQL工作区,也就是一段内存区域,用于暂时存放受SQL语句影响到的数据。通俗理解就是将受影响的数据暂时放到了一个内存区域的虚表中，而这个虚表就是游标。</p>
<p>也就是说在commit之前你操作的都是这个游标，操作错误你可以使用rollback()方法回滚，如果在增删改之后没有commit所有操作都是白搭</p>
<h2 id="操作游标的方法"><a href="#操作游标的方法" class="headerlink" title="操作游标的方法"></a>操作游标的方法</h2><p>close():关闭此游标对象<br>fetchone():得到结果集的下一行<br>fetchmany([size = cursor.arraysize]):得到结果集的下几行<br>fetchall():得到结果集中剩下的所有行<br>excute(sql[, args]):执行一个数据库查询或命令<br>excutemany(sql, args):执行多个数据库查询或命令</p>
<h1 id="现在上代码"><a href="#现在上代码" class="headerlink" title="现在上代码"></a>现在上代码</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="comment"># 连接mysql</span></span><br><span class="line"><span class="comment"># host为数据库的主机IP地址, port为MySQL的默认端口号, user为数据的用户名, password为数据库的登录密码, db为数据库的名称</span></span><br><span class="line">config = &#123;</span><br><span class="line">    <span class="string">'host'</span>: <span class="string">'localhost'</span>,</span><br><span class="line">    <span class="string">'port'</span>: <span class="number">3306</span>,</span><br><span class="line">    <span class="string">'user'</span>: <span class="string">'root'</span>,</span><br><span class="line">    <span class="string">'password'</span>: <span class="string">'123456'</span>,</span><br><span class="line">    <span class="string">'database'</span>: <span class="string">'reptiledata'</span></span><br><span class="line">&#125;</span><br><span class="line">db = pymysql.connect(**config)</span><br><span class="line">cursor = db.cursor() <span class="comment"># 建立游标对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------------------------------------表操作----------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 如果存在就删除表</span></span><br><span class="line">cursor.execute(<span class="string">"drop table if exists user"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新增表</span></span><br><span class="line">cursor.execute(<span class="string">"""create table if not exists user(</span></span><br><span class="line"><span class="string">                  id int auto_increment primary key,</span></span><br><span class="line"><span class="string">                  name varchar(5),</span></span><br><span class="line"><span class="string">                  sex  char(1),</span></span><br><span class="line"><span class="string">                  id_card  char(18),</span></span><br><span class="line"><span class="string">                  phone  varchar(14),</span></span><br><span class="line"><span class="string">                  address  varchar(12),</span></span><br><span class="line"><span class="string">                  create_time time)"""</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改自增长Id,数据库新增的数据会从1000开始但是原来的数据不会改变</span></span><br><span class="line">cursor.execute(<span class="string">'alter table user AUTO_INCREMENT=1000'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新增数据库表字段</span></span><br><span class="line">cursor.execute(<span class="string">'alter table user add plus varchar(8)'</span>)</span><br><span class="line"><span class="comment"># --------------------------插入数据-------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 批量插入数据</span></span><br><span class="line">cursor.execute(<span class="string">'alter table user drop plus'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 插入单条数据但因为后面用了db.rollback()回滚，所以此条数据不会被添加</span></span><br><span class="line">cursor.execute(<span class="string">"""insert into user(name, sex, id_card, phone, address)</span></span><br><span class="line"><span class="string">        values ('李四', '女', '511569845612354879', '10086', '数据不会被添加')"""</span>)</span><br><span class="line">db.rollback() </span><br><span class="line"></span><br><span class="line"><span class="comment"># 批量插入数据，如果不列出字段名mysql会按照顺序添加</span></span><br><span class="line">sql = <span class="string">"""insert into user(name, sex, id_card, phone, address)</span></span><br><span class="line"><span class="string">        values (%s, %s, %s, %s, %s)"""</span></span><br><span class="line">sql_data = [[<span class="string">'张三'</span>, <span class="string">'女'</span>, <span class="string">'511569845612354879'</span>, <span class="string">'10086'</span>, <span class="string">'太古里77号'</span>],</span><br><span class="line">            [<span class="string">'李四'</span>, <span class="string">'男'</span>, <span class="string">'511569845612354879'</span>, <span class="string">'10086'</span>, <span class="string">'太古里77号'</span>],</span><br><span class="line">            [<span class="string">'王麻子子'</span>, <span class="string">'男'</span>, <span class="string">'511569845612354879'</span>, <span class="string">'10086'</span>, <span class="string">'太古里66号'</span>],</span><br><span class="line">            [<span class="string">'张二'</span>, <span class="string">'女'</span>, <span class="string">'511569845612354879'</span>, <span class="string">'10086'</span>, <span class="string">'太古里77号'</span>],</span><br><span class="line">            [<span class="string">'李五'</span>, <span class="string">'男'</span>, <span class="string">'511569845612354879'</span>, <span class="string">'10086'</span>, <span class="string">'太古里88号'</span>],</span><br><span class="line">            [<span class="string">'王麻子'</span>, <span class="string">'女'</span>, <span class="string">'511569845612354879'</span>, <span class="string">'10086'</span>, <span class="string">'太古里99号'</span>]]</span><br><span class="line">cursor.executemany(sql, sql_data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------------------------------------查询数据-----------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># order by 对查询结果进行排序 select 字段1,字段2,字段3 from 表名 order by 字段 desc(降序)||asc(升序)</span></span><br><span class="line">cursor.execute(<span class="string">"select address,id from user order by id desc"</span>)</span><br><span class="line">select = cursor.fetchall()</span><br><span class="line">print(select)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 去重复查询 select distinct 字段 from 表名</span></span><br><span class="line">cursor.execute(<span class="string">"select distinct address from user"</span>)</span><br><span class="line">select = cursor.fetchall()</span><br><span class="line">print(select)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分页查询 limit select 字段1，字段2 from 表名 limit 初始位置，记录数</span></span><br><span class="line">cursor.execute(<span class="string">"select id, name, sex, id_card from user limit 3,6"</span>)</span><br><span class="line">select = cursor.fetchall()</span><br><span class="line">print(select)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 精准查询 in 只查找括号内的数据； not in 则相反</span></span><br><span class="line">cursor.execute(<span class="string">"select * from user where ID in (1001,1003)"</span>)</span><br><span class="line">select = cursor.fetchall()</span><br><span class="line">print(select)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 精准查询 between and 查找1001-1003范围内的数据；not between and 相反</span></span><br><span class="line">cursor.execute(<span class="string">"select * from user where ID between 1001 and 1003"</span>)</span><br><span class="line">select = cursor.fetchall()</span><br><span class="line">print(select)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模糊查询 like (% 代表任意字符 _ 代表单个字符)；not like相反</span></span><br><span class="line">cursor.execute(<span class="string">"select * from user where name like '_麻%'"</span>)</span><br><span class="line">select = cursor.fetchall()</span><br><span class="line">print(select)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多条件查询 and 关键字</span></span><br><span class="line">cursor.execute(<span class="string">"select * from user where sex='女' and address='太古里77号'"</span>)</span><br><span class="line">select = cursor.fetchall()</span><br><span class="line">print(select)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多条件查询 or 关键字 只需满足一个条件</span></span><br><span class="line">cursor.execute(<span class="string">"select * from user where name='王麻子子' or address='太古里77号' "</span>)</span><br><span class="line">select = cursor.fetchall()</span><br><span class="line">print(select)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------删除数据和更新数据 or,and,between and,like等关键字可以查询到多条数据然后批量删除或者更新-----------------------------------</span></span><br><span class="line"><span class="comment"># 删除数据</span></span><br><span class="line">cursor.execute(<span class="string">"delete from user where name='王麻子子' or address='太古里77号'"</span>)</span><br><span class="line"><span class="comment"># 数据库清空</span></span><br><span class="line">cursor.execute(<span class="string">"truncate table user"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新数据</span></span><br><span class="line">cursor.execute(<span class="string">"update user set name = '更新' where ID in (1005,1006)"</span>)</span><br><span class="line"></span><br><span class="line">cursor.close()  <span class="comment"># 关闭游标对象</span></span><br><span class="line">db.commit()  <span class="comment"># 提交操作</span></span><br><span class="line">db.close()  <span class="comment"># 关闭数据库</span></span><br></pre></td></tr></table></figure>
<p>欢迎留言交流  (´▽`ʃ♡ƪ)</p>
<p></p></div><div class="meta"><i class="iconfont iconshijian1">2018-08-09 15:00</i></div></article><article><a class="title" href="/2018/08/07/mpvue/">mpvue小程序以及微信直播踩坑总结</a><div class="content ellipse"><p></p><p>前段时间刚写完一个mpvue的小程序，现在得闲必须赶紧记录和总结一下，不然很多东西又要忘了</p>
<p>我是比较熟悉vue的语法，但是也犹豫过是用原生还是用mpvue，因为那时候原生小程序已经相当成熟而mpvue才刚出来（踩坑和填坑的前人还很少）</p>
<p>所以我学习了几天原生的框架和语法，果断选择了mpvue，真的是没有对比就没有伤害，对比原生体验不要太好</p>
<p>mpvue是一个使用 Vue.js 开发小程序的前端框架，他是将我们写的vue文件重新编译成wxml等文件，最后的底层实现还是用的小程序语法，所以原生小程序语法也是比较重要的，而且像很多下拉刷新，到底部请求下一页什么的等等很多地方也是要用到小程序api的，所以建议大家在入坑之前还是了解一些小程序语法比较好</p>
<p>附上<a href="http://mpvue.com/#_1" target="_blank" rel="noopener">官方文档</a></p>
<h1 id="项目配置"><a href="#项目配置" class="headerlink" title="项目配置"></a>项目配置</h1><p>使用官方的5分钟上手，生成一个基本框架，后来开发也没有手动修改过他的配置</p>
<p>用到了4个插件</p>
<h2 id="mpvue-weui-ui库，相当方便轻量好使"><a href="#mpvue-weui-ui库，相当方便轻量好使" class="headerlink" title="mpvue-weui    ui库，相当方便轻量好使"></a>mpvue-weui    ui库，相当方便轻量好使</h2><p>官网地址：<a href="http://kuangpf.com/mpvue-weui/#/" target="_blank" rel="noopener">http://kuangpf.com/mpvue-weui/#/</a></p>
<h2 id="mpvue-toast-一个基于mpvue的简单弹窗组件"><a href="#mpvue-toast-一个基于mpvue的简单弹窗组件" class="headerlink" title="mpvue-toast  一个基于mpvue的简单弹窗组件"></a>mpvue-toast  一个基于mpvue的简单弹窗组件</h2><p>因为mpvue目前还不支持全局的组件，所以没有办法像vue组件引入一次就能在所有页面使用，但是mpvue团队已经在考虑新增全局组件功能了</p>
<p>github地址：<a href="https://github.com/linrui1994/mpvue-toast" target="_blank" rel="noopener">https://github.com/linrui1994/mpvue-toast</a> </p>
<h2 id="sass-不多介绍"><a href="#sass-不多介绍" class="headerlink" title="sass  不多介绍"></a>sass  不多介绍</h2><p>全局安装：npm install sass-loader node-sass –save-dev </p>
<p>在style节点加上lang=”scss”，这样就可以愉快地使用sass进行开发了</p>
<h2 id="mpvue-router-patch-在mpvue-中使用-vue-router-兼容的路由写法"><a href="#mpvue-router-patch-在mpvue-中使用-vue-router-兼容的路由写法" class="headerlink" title="mpvue-router-patch   在mpvue 中使用 vue-router 兼容的路由写法"></a>mpvue-router-patch   在mpvue 中使用 vue-router 兼容的路由写法</h2><p>当知道mpvue不支持vue-router的时候我还是非常难受，还好mpvue团队后面发布了这个插件，非常简单好用</p>
<p>github地址：<a href="https://github.com/F-loat/mpvue-router-patch" target="_blank" rel="noopener">https://github.com/F-loat/mpvue-router-patch</a></p>
<p>接下来的3个插件我没有用过但是和mpvue-router-patch一样是mpvue团队发布的，感觉应该也不差，也推荐给大家如果需要可以花时间了解一下</p>
<h2 id="mpvue-echarts-适用于-Mpvue-的-ECharts-组件"><a href="#mpvue-echarts-适用于-Mpvue-的-ECharts-组件" class="headerlink" title="mpvue-echarts    适用于 Mpvue 的 ECharts 组件"></a>mpvue-echarts    适用于 Mpvue 的 ECharts 组件</h2><p>github地址：<a href="https://github.com/F-loat/mpvue-echarts" target="_blank" rel="noopener">https://github.com/F-loat/mpvue-echarts</a></p>
<h2 id="微信小程序富文本解析组件-适用于-Mpvue-的微信小程序富文本解析自定义组件"><a href="#微信小程序富文本解析组件-适用于-Mpvue-的微信小程序富文本解析自定义组件" class="headerlink" title="微信小程序富文本解析组件  适用于 Mpvue 的微信小程序富文本解析自定义组件"></a>微信小程序富文本解析组件  适用于 Mpvue 的微信小程序富文本解析自定义组件</h2><p>github地址：<a href="https://github.com/F-loat/mpvue-wxParse" target="_blank" rel="noopener">https://github.com/F-loat/mpvue-wxParse</a></p>
<h2 id="mpvue-entry自动生成各页面的入口文件-集中式页面配置，自动生成各页面的入口文件，优化目录结构，支持新增页面热更新"><a href="#mpvue-entry自动生成各页面的入口文件-集中式页面配置，自动生成各页面的入口文件，优化目录结构，支持新增页面热更新" class="headerlink" title="mpvue-entry自动生成各页面的入口文件  集中式页面配置，自动生成各页面的入口文件，优化目录结构，支持新增页面热更新"></a>mpvue-entry自动生成各页面的入口文件  集中式页面配置，自动生成各页面的入口文件，优化目录结构，支持新增页面热更新</h2><p>github地址：<a href="https://github.com/F-loat/mpvue-entry" target="_blank" rel="noopener">https://github.com/F-loat/mpvue-entry</a></p>
<h2 id="关于ajax请求封装，拿走不谢"><a href="#关于ajax请求封装，拿走不谢" class="headerlink" title="关于ajax请求封装，拿走不谢"></a>关于ajax请求封装，拿走不谢</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> urlPath = <span class="string">''</span> <span class="comment">// 项目的域名</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">post</span>(<span class="params">url, data</span>) </span>&#123;</span><br><span class="line">  wx.showLoading(&#123;</span><br><span class="line">    title: <span class="string">'努力加载中'</span>,</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="comment">// 由于微信不会保存后端用于登陆验证的cookie，这里需要自己从登陆返回的数据里取到cookie，然后本地缓存，请求时在header里带上cookie</span></span><br><span class="line">  <span class="keyword">let</span> header = &#123;&#125; </span><br><span class="line">  url === <span class="string">'user/loginworker'</span> <span class="comment">// 通过传进来的url判断是否是登陆页</span></span><br><span class="line">    ? header = &#123;&#125; </span><br><span class="line">    : header = &#123;</span><br><span class="line">      <span class="string">'content-type'</span>: <span class="string">'application/x-www-form-urlencoded'</span>,</span><br><span class="line">      <span class="string">'cookie'</span>: wx.getStorageSync(<span class="string">"sessionid"</span>)</span><br><span class="line">    &#125; </span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    wx.request(&#123;</span><br><span class="line">      url: urlPath + url,</span><br><span class="line">      data: data,</span><br><span class="line">      method: <span class="string">'get'</span>,</span><br><span class="line">      header: header, success(res) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res)</span><br><span class="line">        <span class="keyword">if</span> (res.statusCode === <span class="number">200</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span> (res.data === <span class="number">9999</span>) &#123; <span class="comment">// 后端返回9999表示cookie失效</span></span><br><span class="line">            wx.showModal(&#123;</span><br><span class="line">              content: <span class="string">'登陆超时请重新登陆'</span>,</span><br><span class="line">              showCancel: <span class="literal">false</span>,</span><br><span class="line">              success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (res.confirm) &#123;</span><br><span class="line">                  wx.navigateTo(&#123;</span><br><span class="line">                    url: <span class="string">'../../pages/login/main'</span>,</span><br><span class="line">                  &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (res.data.code &amp;&amp; res.data.code !== <span class="number">200</span>) &#123; <span class="comment">// 若返回coode码且不等于200表示传入参数有问题</span></span><br><span class="line">            res.message = res.data.message, reject(res)</span><br><span class="line">          &#125; <span class="keyword">else</span> resolve(res)</span><br><span class="line">            <span class="comment">// 存储cookie</span></span><br><span class="line">          res.data.message === <span class="string">'登录成功。'</span> ? wx.setStorageSync(<span class="string">"sessionid"</span>, res.header[<span class="string">"Set-Cookie"</span>]) : <span class="string">""</span></span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">          res.message = <span class="string">'服务器错误请求失败'</span></span><br><span class="line">          reject(res)</span><br><span class="line">        &#125;</span><br><span class="line">        wx.hideLoading()</span><br><span class="line">      &#125;, fail(err) &#123;</span><br><span class="line">        err.message = <span class="string">'请求超时请稍后再试'</span></span><br><span class="line">        reject (err)</span><br><span class="line">        wx.hideLoading()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="生命周期钩子"><a href="#生命周期钩子" class="headerlink" title="生命周期钩子"></a>生命周期钩子</h2><p>created是vue的生命周期在mpvue里所有页面的created函数会在项目加载的时候被一起调用，可用性不大，可以使用onShow()代替，但是onShow()只有在隐藏又显示后才会显示,也就是第一次加载不会执行</p>
<p> created() {<br>    console.log(‘created’)<br>  },<br>  mounted() {<br>    console.log(‘mounted’)<br>  },<br>  onLoad() {<br>    console.log(‘onLoad’)<br>  },<br>  onShow() {<br>    console.log(‘onShow’)<br>  },<br>  onUnload() {<br>    console.log(‘onUnload’)<br>  },<br>  onHide() {<br>    console.log(‘onHide’)<br>  },</p>
<h2 id="页面跳转后并没有销毁页面实例"><a href="#页面跳转后并没有销毁页面实例" class="headerlink" title="页面跳转后并没有销毁页面实例"></a>页面跳转后并没有销毁页面实例</h2><p>比如一个搜索页面，页面第一次进来所有的数据都是空的，但你搜索一次之后，input框就有值了，这个时候再跳转到其他页面或者返回之后再进入这个页面那个值依然存在，页面跳转后并没有销毁页面实例，而是将其推入页面栈中，所以会保存之前的旧的数据，目前为止看到的比较统一的解决办法就是：在onShow()或者onLoad()手动清空</p>
<h2 id="关于微信直播"><a href="#关于微信直播" class="headerlink" title="关于微信直播"></a>关于微信直播</h2><p>这个小程序需要引入监控相当于是直播功能，这个组件也是有点坑</p>
<p>Live-player组件本身只能播放，如果想要在组件上加功能，像什么全屏静音播放暂停之类的功能需要使用wx.createLivePlayerContext()方法，而且由于live-player层级是最高的，如果你需要在组件上加功能比如点一下全屏再点下退出全屏或者加css样式，你必须写在 cover-view cover-image上面，直接加在live-player上是没用的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;live-player id=<span class="string">'liveInfo'</span> src=<span class="string">""</span> mode=<span class="string">"live"</span> autoplay=<span class="string">'false'</span> @bindstatechange=<span class="string">"statechange"</span> binderror=<span class="string">"error"</span>&gt;</span><br><span class="line">    &lt;cover-image @click=<span class="string">"requestFullScreen"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">cover-image</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">live-player</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>你以为这样就完了嘛，不，如果你有一个直播列表，比如一个屏幕同时有一个以上的live-player组件那么你全屏的时候就会发现其余的组件因为层级的原因全部覆盖在你全屏的那个组件之上</p>
<p>解决办法：全屏是v-if隐藏其余的组件，退出时再显示</p>
<p>欢迎留言交流  (´▽`ʃ♡ƪ)</p>
<p></p></div><div class="meta"><i class="iconfont iconshijian1">2018-08-07 17:31</i></div></article><article><a class="title" href="/2018/08/07/python_爬虫/">python爬虫之爬取掘金网首页存入mysql数据库</a><div class="content ellipse"><p></p><p>博主是个前端小白，最近在学习爬虫，写个实战系列也是想记录自己学习的过程，以便后续回顾</p>
<p>欢迎大家一起交流学习、共同进步</p>
<p>这篇文章达成的效果是爬掘金网的首页的数据存到mysql数据库里</p>
<p><img src="https://img-blog.csdn.net/2018080714283577?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RvbmdfMTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="效果"><br><img src="https://img-blog.csdn.net/20180807143043893?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RvbmdfMTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="效果"></p>
<p>做这个实战你需要具有一点点python的基础知识，当然没有也行可以复制代码先跑一跑感受一下会有动力一点</p>
<p>爬取的网站：<a href="https://juejin.im/timeline" target="_blank" rel="noopener">https://juejin.im/timeline</a></p>
<p>系统：win10</p>
<p>python版本:3.7</p>
<p>MYSQL安装包下载：<a href="https://dev.mysql.com/downloads/windows/installer/" target="_blank" rel="noopener">https://dev.mysql.com/downloads/windows/installer/</a> </p>
<p><img src="https://img-blog.csdn.net/20180802145942417?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RvbmdfMTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="效果"></p>
<p>mysql-installer-web-community  15.9M那个是在线安装</p>
<p>mysql-installer-community 推荐下载第二个离线安装</p>
<p>现在这个安装包好像不分32位还是64位，我是64位的安装成功，MSI安装版安装挺简单的我就不赘述了（其实我安装蛮久了没记录下来）</p>
<p>安装完成可以通过·mysql -u root -p查看</p>
<p>mysql安装成功后你还需要一个python操作mysql的库，cmd执行使用pip安装pymysql:</p>
<p>pip install pymysql<br>环境准备好后就开始愉快的学习吧</p>
<p>网站分析<br>我们进入网站<a href="https://juejin.im/，然后打开f12（博主用的是chrome浏览器，在前端眼里chrome是最好浏览器没有之一）" target="_blank" rel="noopener">https://juejin.im/，然后打开f12（博主用的是chrome浏览器，在前端眼里chrome是最好浏览器没有之一）</a></p>
<p>掘金网是个动态网站，即客户端（浏览器）根据服务端（服务器）返回的数据动态渲染网页</p>
<p>那么数据从哪儿来，服务端会根据客户端不同的请求或者请求参数的差异来返回数据</p>
<p>这里我们需要登陆下，我们登陆成功即通过服务端验证后服务器会签发一个 Token发送给客户端，你可以理解为一个验证身份的令牌，客户端收到 Token 以后把它存储起来，每次向服务端请求资源的时候都需要带着这个token，服务端收到请求，去验证客户端请求里面带着的 Token，如果验证成功，就向客户端返回请求的数据</p>
<p><img src="https://img-blog.csdn.net/20180807120526739?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RvbmdfMTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="效果"></p>
<p>我们可以看到有很多请求，什么图片、脚本资源、svg很多</p>
<p>点击XHR按钮过滤请求只显示XMLHttpRequest方法发送的请求</p>
<p><img src="https://img-blog.csdn.net/20180807120941504?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RvbmdfMTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="效果"></p>
<p>过滤之后现在挨着查看，找到返回文章数据的那条请求</p>
<p>大部分数据都是页面或者服务器做判断用的，我们提取这些参数就好</p>
<p>[‘category’][‘name’] 文章分类<br>[‘title’] 文章标题<br>[‘content’] 文章概要<br>[‘originalUrl’] 文章链接<br>[’tags’] 文章标签<br>[‘user’][‘username’] 文章作者</p>
<p><img src="https://img-blog.csdn.net/20180807124337750?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RvbmdfMTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="效果"></p>
<p>然后我们查看他的Headers，滑到底部可以看到uery string params是由客户端发给服务器时请求携带的参数</p>
<p><img src="https://img-blog.csdn.net/20180807130603595?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RvbmdfMTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="参数"></p>
<p>这些参数里面有个limit是请求的条数，就是你请求多少条就会返回多少条数据</p>
<p>现在上代码<br>需要3个库，除了第一个pymsql以为都是python自带的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import pymysql # 操作mysql的库</span><br><span class="line">from urllib import request, parse #请求需要的库</span><br><span class="line">import json # 处理参数需要的库</span><br></pre></td></tr></table></figure></p>
<p>我们先发送请求获取数据<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">def juejin_req(data_num): # data_num是请求的条数</span><br><span class="line">    url = &apos;https://timeline-merger-ms.juejin.im/v1/get_entry_by_rank&apos; # 请求的url</span><br><span class="line">    req_data = &#123;  # 请求需要携带的参数</span><br><span class="line">        &apos;src&apos;: &apos;web&apos;,</span><br><span class="line">        &apos;uid&apos;: &apos;5b5ebcd1f265da0f60132076&apos;,</span><br><span class="line">        &apos;device_id&apos;: 1533608440568,</span><br><span class="line">        &apos;token&apos;: &apos;你的token&apos;,</span><br><span class="line">        &apos;limit&apos;: data_num,</span><br><span class="line">        &apos;category&apos;: &apos;all&apos;,</span><br><span class="line">        &apos;recomment&apos;: 1</span><br><span class="line">    &#125;</span><br><span class="line">    req_data = str(parse.urlencode(req_data, &apos;utf-8&apos;)) # 由于是get请求所以我们在使用parse.urlencode()方法转换编码格式后还需要使用str()方法转换为字符串</span><br><span class="line">    json_data = request.urlopen(url+&apos;?&apos;+req_data) # 拼凑url发送请求</span><br><span class="line">    print(&apos;数据请求成功&apos;)</span><br><span class="line">    json_data = json_data.read().decode(&apos;utf-8&apos;)  # 拿到数据转换编码格式</span><br><span class="line">    json_data = json.loads(json_data)  # 使用json.loads()将字符串序列化</span><br><span class="line">    json_data = json_data[&apos;d&apos;][&apos;entrylist&apos;] # 获取到数据列表</span><br><span class="line">    sql_data = [] # 最后储存到数据的变量</span><br><span class="line">    for item in json_data: # 循环遍历列表提取需要的数据</span><br><span class="line">        tag = [] </span><br><span class="line">        for aa in item[&apos;tags&apos;]: # 提取标签</span><br><span class="line">            tag.append(aa[&apos;title&apos;])</span><br><span class="line">        sql_data.append((item[&apos;category&apos;][&apos;name&apos;],  item[&apos;title&apos;], item[&apos;content&apos;], item[&apos;originalUrl&apos;], str(tag), item[&apos;user&apos;][&apos;username&apos;],))</span><br><span class="line">    print(&apos;一共有%s条数据&apos; % len(sql_data))</span><br><span class="line">    return sql_data</span><br></pre></td></tr></table></figure></p>
<p>打开workbench，这是自带的一款可视化的sql操作工具</p>
<p><img src="https://img-blog.csdn.net/20180802151203471?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RvbmdfMTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="参数"></p>
<p>首先我们先新建一个连接<br>点击新建一个连接—–填上连接名字hellosql—–点击ok—–在弹出的弹框中输入你的密码–点击ok</p>
<p><img src="https://img-blog.csdn.net/20180803104853455?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RvbmdfMTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="参数"></p>
<p>连接建立后我们新建一个数据库，在左侧红圈空白地方右键—create scheme（新建一个数据库），这地方我已经建了</p>
<p><img src="https://img-blog.csdn.net/20180807133227686?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RvbmdfMTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="参数"></p>
<p>输入数据库名字reptiledata—点击apply—出现一个弹框继续点击apply，这样我们就新建了一个数据库</p>
<p><img src="https://img-blog.csdn.net/20180807133445579?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RvbmdfMTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="参数"></p>
<p>这是操作数据库的代码，获取到请求的数据后将数据return处理在传给juejin_sql函数，所以把这段代码放在上面那段代码后面<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">def juejin_sql(sql_data):</span><br><span class="line">    print(&apos;连接数据库&apos;)</span><br><span class="line">    db = pymysql.connect(host=&apos;localhost&apos;,</span><br><span class="line">                        port=3306, # 端口号</span><br><span class="line">                        user=&apos;root&apos;, </span><br><span class="line">                        password=&apos;123456&apos;, # 密码</span><br><span class="line">                        database=&apos;reptiledata&apos;) # 数据库</span><br><span class="line">    cursor = db.cursor() # 建立一个游标对象</span><br><span class="line">    try:</span><br><span class="line">        #判断表是否存在，若不存在则新建</span><br><span class="line">        cursor.execute(&quot;&quot;&quot;CREATE TABLE IF NOT EXISTS juejin(</span><br><span class="line">                    category  TEXT,</span><br><span class="line">                    title  TEXT,</span><br><span class="line">                    content  TEXT,</span><br><span class="line">                    originalUrl  TEXT,</span><br><span class="line">                    tags  TEXT,</span><br><span class="line">                    username TEXT)&quot;&quot;&quot;)</span><br><span class="line">    except:</span><br><span class="line">        print(&quot;Table &apos;juejin&apos; already exists&quot;)</span><br><span class="line">        return False</span><br><span class="line">    sql = &quot;&quot;&quot;insert into juejin(category, title, content, originalUrl, tags, username)</span><br><span class="line">            values (%s, %s, %s, %s, %s, %s)&quot;&quot;&quot; # sql语句</span><br><span class="line">    print(&apos;正在批量添加&apos;)</span><br><span class="line">    cursor.executemany(sql, sql_data) # 批量添加</span><br><span class="line">    cursor.execute(&apos;select count(*) from juejin&apos;)</span><br><span class="line">    results = cursor.fetchall() # 查询全部总条数</span><br><span class="line">    print(&apos;数据库目前有%d条数据&apos; % results[0][0])</span><br><span class="line">    db.commit()  # 对于数据增删改之后一定要提交操作</span><br><span class="line">    cursor.close()  # 关闭游标</span><br><span class="line">    print(&apos;操作完成关闭数据库关闭游标&apos;)</span><br><span class="line">    db.close()  # 关闭数据库连接</span><br><span class="line"></span><br><span class="line">juejin_sql(juejin_req(100))</span><br></pre></td></tr></table></figure></p>
<p>欢迎留言交流  (´▽`ʃ♡ƪ)</p>
<p></p></div><div class="meta"><i class="iconfont iconshijian1">2018-08-07 14:51</i></div></article><article><a class="title" href="/2018/06/24/平面&amp;&amp;ui/">UI和平面设计的区别</a><div class="content ellipse"><p></p><p>前段时间自告奋勇的给新项目做UI设计，项目包括一个网站一个app还有一个后台，后台没有设计套用以前的模板主要是将就前端也就是我还有我的小伙伴们,总的花费时间共一周左右</p>
<p>作为曾经的一只平面设计狗，这是我UI处女作  哈哈哈哈！！！</p>
<p>在没做前端之前一直觉得平面和UI都是根据客户的需求设计画图嘛也都是平面图也没什么太大的区别，而且UI还不用像平面设计海报那样做一些复杂抓人眼球的效果，毕竟现在的页面为了追求速度用户体验什么的都是扁平化趋于简洁</p>
<p>这次呢是深切感受到了UI和平面的区别</p>
<p>在学习css开始我就知道UI画的图都是需要前端实现的，设计的时候，除了好的创意，还应该考虑到技术上的可行性，就像这次设计页面的时候是自动把自己代入了前端这个角色所以在设计时更多的考虑到css样式布局js的特效数据渲染什么的还有组件模块的复用问题等等，设计方面远不如平面设计那么自由洒脱</p>
<p>大部分平面设计的作品都是以印刷的平面形式表现，这需要设计师去了解各种材料之间的区别以及不同材料所做出来的成品效果的差别，但在设计方面却是比较自由的，在符合主题的情况下怎么好看怎么漂亮怎么抓人眼球怎么来，很多时候平面设计师一个人对接一个客户就能完成一个作品，而ui除了产品客户以外还得对接前端后端需要遵守一系列的项目流程，而最后的成功也是团队协作达成的效果，这也是很大的一个不同点</p>
<p>UI设计的时候除了考虑前端的实现还有最重要的是用户体验和交互，毕竟网页是会”动”起来的，不管是网站还是其他什么软件都是需要用户去操作，这需要去琢磨研究用户的行为，所以好的ui设计不只是画面的美观还要让用户操作起来感觉舒适简单自由</p>
<p>所以总的来讲呢，平面注重视觉创意，UI却是更注重用户交互，两者在视觉传达方面是共通的，但是在难点侧重点方面却是不一样的</p>
<p>欢迎留言交流  (´▽`ʃ♡ƪ)</p>
<p></p></div><div class="meta"><i class="iconfont iconshijian1">2018-06-24 22:58</i></div></article><div id="paginator"><a class="extend prev" rel="prev" href="/archives/page/2/">Prev</a><a class="page-number" href="/archives/">1</a><a class="page-number" href="/archives/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/archives/page/4/">4</a><a class="extend next" rel="next" href="/archives/page/4/">Next</a></div></div><script>document.getElementById('arshow').onclick = function() {
    document.getElementById('list_archives').style = 'opacity: 0;display: none'

    document.getElementById('normalposts').style = 'opacity: 0;display: block'
    setTimeout(() => {
        document.getElementById('normalposts').style.opacity = '1'                        
    }, 100);

}
document.getElementById('poshow').onclick = function() {
    document.getElementById('normalposts').style = 'opacity: 0;display: none'
    document.getElementById('list_archives').style = 'opacity: 1;display: block'
}</script></div></div></div><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>var _hmt = _hmt || [];(function(){var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?a4d08c5088ca0d4b18c14260c9ca89a1";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})()</script></body></html>