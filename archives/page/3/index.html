<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="keywords" content="没事儿,tong-h,Tong-H,tong-h blog"><meta name="descriptioon" content="personal blog by tong/没事儿"><meta name="renderer" content="wekit"><link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/css/public.css"><link rel="stylesheet" href="/css/reset.css"><link rel="stylesheet" href="/css/iconfont.css"><title>博客 [ 没事儿 ]</title><link rel="stylesheet" href="/css/partial/footer.css"><link rel="stylesheet" href="/css/partial/posts.css"><link rel="stylesheet" href="/css/partial/posts.css"><link rel="stylesheet" href="/css/partial/sidebar.css"><link rel="stylesheet" href="/css/archive.css"><link rel="stylesheet" href="/css/index.css"></head><body class="scroll"><link rel="stylesheet" href="/css/partial/header.css"><div class="header"><div class="maxwidth"><div class="nav"><a id="artlist" href="/404"><i class="iconfont icon404"></i><span class="headhid">&nbsp;404</span></a><a class="focuspage" id="artlist" href="/archives"><i class="iconfont iconarchives"></i><span class="headhid">&nbsp;博 客</span></a><a id="artlist" href="/about"><i class="iconfont iconabout"></i><span class="headhid">&nbsp;关 于</span></a><a id="artlist" href="/link"><i class="iconfont iconlink"></i><span class="headhid">&nbsp;友 链</span></a></div><div class="search">It's more tiring to stop</div></div></div><div class="headerline"></div><div class="main"> <div class="maxwidth"><link rel="stylesheet" href="/css/partial/sidebar.css"><div id="sidebar"><div class="info"><a href="/"><img src="/images/user.png" alt="头像"></a><div><p>没事儿</p></div></div><div class="social"><a href="/archives" title="Home"><i class="iconfont iconHome"></i></a><a href="/atom.xml" title="RSS 源订阅"><i class="iconfont iconsubscribe-1-copy"></i></a><a href="mailto:tongt0232@gmail.com" title="E-Mail"><i class="iconfont iconweibiaoti554"></i></a><a href="https://github.com/tong-h" title="GitHub"><i class="iconfont iconGitHub"></i></a><a href="https://www.jianshu.com/u/20de04cc53de" title="简书"><img src="/images/jianicon-sidebar.png"></a></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/MYSQL/">MYSQL</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/PYTHON/">PYTHON</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/RESTS/">RESTS</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SERVER/">SERVER</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TOOL/">TOOL</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/WEB/">WEB</a><span class="category-list-count">23</span></li></ul><div class="tags"><a href="/tags/ECharts/" style="font-size: 14px; color: #ffac00">ECharts</a> <a href="/tags/Electron/" style="font-size: 14px; color: #ffac00">Electron</a> <a href="/tags/JSON/" style="font-size: 14px; color: #ffac00">JSON</a> <a href="/tags/angular/" style="font-size: 18px; color: #ec9d00">angular</a> <a href="/tags/canvas/" style="font-size: 26px; color: #c77e00">canvas</a> <a href="/tags/cordova/" style="font-size: 30px; color: #b46e00">cordova</a> <a href="/tags/domain/" style="font-size: 14px; color: #ffac00">domain</a> <a href="/tags/ffmpeg/" style="font-size: 14px; color: #ffac00">ffmpeg</a> <a href="/tags/git/" style="font-size: 14px; color: #ffac00">git</a> <a href="/tags/gitment/" style="font-size: 14px; color: #ffac00">gitment</a> <a href="/tags/hexo/" style="font-size: 22px; color: #da8d00">hexo</a> <a href="/tags/http/" style="font-size: 14px; color: #ffac00">http</a> <a href="/tags/markdown/" style="font-size: 14px; color: #ffac00">markdown</a> <a href="/tags/mpvue/" style="font-size: 14px; color: #ffac00">mpvue</a> <a href="/tags/mysql/" style="font-size: 14px; color: #ffac00">mysql</a> <a href="/tags/nginx/" style="font-size: 14px; color: #ffac00">nginx</a> <a href="/tags/nodejs/" style="font-size: 14px; color: #ffac00">nodejs</a> <a href="/tags/npm/" style="font-size: 14px; color: #ffac00">npm</a> <a href="/tags/python/" style="font-size: 14px; color: #ffac00">python</a> <a href="/tags/rests/" style="font-size: 14px; color: #ffac00">rests</a> <a href="/tags/search/" style="font-size: 14px; color: #ffac00">search</a> <a href="/tags/server/" style="font-size: 14px; color: #ffac00">server</a> <a href="/tags/vue/" style="font-size: 14px; color: #ffac00">vue</a> <a href="/tags/yarn/" style="font-size: 14px; color: #ffac00">yarn</a> <a href="/tags/原型链/" style="font-size: 14px; color: #ffac00">原型链</a> <a href="/tags/死磕英语/" style="font-size: 14px; color: #ffac00">死磕英语</a> <a href="/tags/缓存/" style="font-size: 14px; color: #ffac00">缓存</a> <a href="/tags/网络爬虫/" style="font-size: 18px; color: #ec9d00">网络爬虫</a> <a href="/tags/跨域/" style="font-size: 14px; color: #ffac00">跨域</a></div><script>(function () {
    let list = document.getElementsByClassName('category-list-link')
    for(const i of list) i.href = i.href.toLowerCase()
})()</script></div><div class="archive rightside"><div id="list_archives" style="opacity: 0;display:  none"><div class="switch" id="arshow"><i class="iconfont iconArchives"></i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">3</span></li></ul></div><div id="normalposts"><div class="switch" id="poshow"><i class="iconfont iconshijian"></i></div><article><a class="artititle" href="/2018/09/20/vue3.0/">vue cli 3.0初体验</a><div class="content ellipse"><p></p><p><a href="https://medium.com/the-vue-point/plans-for-the-next-iteration-of-vue-js-777ffea6fabf" target="_blank" rel="noopener">尤雨溪：Vue 3.0 计划</a> 原文需翻墙<br><a href="https://juejin.im/post/5bb719b9f265da0ab915dbdd" target="_blank" rel="noopener">尤雨溪：Vue 3.0 计划</a> 掘金译文</p>
<h1 id="关于安装"><a href="#关于安装" class="headerlink" title="关于安装"></a>关于安装</h1><p>Vue CLI 的包名称由 vue-cli 改成了 @vue/cli<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span> install -g @vue/cli</span><br><span class="line"></span><br><span class="line">安装完成后查看版本</span><br><span class="line">vue --V</span><br></pre></td></tr></table></figure></p>
<h1 id="项目创建"><a href="#项目创建" class="headerlink" title="项目创建"></a>项目创建</h1><p>关于项目创建，除了命令创建3.x还增加了<strong>图形化界面创建以及管理vue项目</strong><br>在创建新项目时还可以<strong>混合选用多种集成</strong></p>
<ul>
<li>TypeScript</li>
<li>PWA</li>
<li>Vue Router &amp; Vuex</li>
<li>ESLint / TSLint / Prettier</li>
<li>用 Jest 或 Mocha 进行单元测试</li>
<li>用 Cypress 或者 Nightwatch 进行 E2E 测试</li>
</ul>
<h2 id="使用命令创建"><a href="#使用命令创建" class="headerlink" title="使用命令创建"></a>使用命令创建</h2><p>命令：vue create vueapp</p>
<p>1、使用上下箭头选择默认设置还是手动选择功能<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Vue CLI v3.0.3</span><br><span class="line">? Please pick a preset:</span><br><span class="line"> <span class="built_in"> default </span>(babel, eslint)</span><br><span class="line">&gt; Manually select features</span><br></pre></td></tr></table></figure></p>
<p>2、按空格键选择你需要的功能，选完后按回车<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">babel：javascript转译器，将最新版的js语法（es6、es7）转换为现阶段浏览器可以兼容的js代码</span><br><span class="line">typescript：使用 TypeScript 书写源码</span><br><span class="line">PWA：渐进式WEB应用</span><br><span class="line">Router：使用vue-router</span><br><span class="line">Vuex：使用vuex</span><br><span class="line">CSS Pre-processors：css预处理器</span><br><span class="line">Linter / Formatter：代码规范标准</span><br><span class="line"><span class="keyword">Unit</span> Testing：单元测试</span><br><span class="line">E2E Testing：e2e测试</span><br><span class="line">Vue CLI v3.<span class="number">0.3</span></span><br><span class="line">? Please pick a preset: Manually <span class="keyword">select</span> features</span><br><span class="line">? Check the features needed <span class="keyword">for</span> your project:</span><br><span class="line"> <span class="comment">(*) Babel</span></span><br><span class="line"><span class="comment"> ( ) TypeScript</span></span><br><span class="line"><span class="comment"> ( ) Progressive Web App (PWA) Support</span></span><br><span class="line"><span class="comment"> (*)</span> Router</span><br><span class="line"> <span class="comment">(*) Vuex</span></span><br><span class="line"><span class="comment">&gt;(*)</span> CSS Pre-processors</span><br><span class="line"> <span class="comment">(*) Linter / Formatter</span></span><br><span class="line"><span class="comment"> ( ) Unit Testing</span></span><br><span class="line"><span class="comment"> ( ) E2E Testing</span></span><br></pre></td></tr></table></figure></p>
<p>3、router是否使用history模式，history需要服务器支持详，情请看这儿<a href="https://router.vuejs.org/zh/guide/essentials/history-mode.html" target="_blank" rel="noopener">https://router.vuejs.org/zh/guide/essentials/history-mode.html</a><br>这里我就选no</p>
<p>4、css预处理器的选择，我习惯用sass</p>
<p>5、代码格式化检测选择，我用的是ide是vscode个人感觉搭配插件用着很舒服，所以我选Prettier</p>
<p>6、是否保存刚才的配置，下一次就不用重新配置了，我就直接回车</p>
<p>7、关于Babel, PostCSS, ESLint, etc.这些配置文件你是想放在package.json里面还是单独放在外面<br>编辑器一般默认会在项目根目录下寻找配置文件，这里我就直接回车选择In dedicated config files</p>
<p>8、是否保存为未来项目的预配置吗，我也是直接回车</p>
<p>最后配置如下<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Vue CLI v3.0.3</span><br><span class="line">? Please pick a preset: Manually select features</span><br><span class="line">? Check the features needed <span class="keyword">for</span> your project: Babel, Router, Vuex, CSS Pre-processors, Linter</span><br><span class="line">? Use history mode <span class="keyword">for</span> router? (Requires proper<span class="built_in"> server </span>setup <span class="keyword">for</span> index fallback <span class="keyword">in</span> production) <span class="literal">No</span></span><br><span class="line">? Pick a CSS pre-processor (PostCSS, Autoprefixer <span class="keyword">and</span> CSS Modules are supported by default): Sass/SCSS</span><br><span class="line">? Pick a linter / formatter config: Prettier</span><br><span class="line">? Pick additional lint features: Lint on save</span><br><span class="line">? Where <span class="keyword">do</span> you prefer placing<span class="built_in"> config </span><span class="keyword">for</span> Babel, PostCSS, ESLint, etc.? <span class="keyword">In</span> dedicated<span class="built_in"> config </span>files</span><br><span class="line">? Save this as a preset <span class="keyword">for</span> future projects? <span class="literal">Yes</span></span><br></pre></td></tr></table></figure></p>
<h2 id="图形化界面"><a href="#图形化界面" class="headerlink" title="图形化界面"></a>图形化界面</h2><p>图形化操作非常方便，我就不一步步演示了，主要懒得贴图 (°ー°〃)<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">执行npm命令</span><br><span class="line">vue ui</span><br><span class="line">访问 <span class="string">http:</span><span class="comment">//localhost:8000 你就可以创建，管理，导入项目</span></span><br></pre></td></tr></table></figure></p>
<h1 id="实用新功能"><a href="#实用新功能" class="headerlink" title="实用新功能"></a>实用新功能</h1><ul>
<li>node_modules</li>
<li>public</li>
<li>src</li>
<li>.browserslistrc</li>
<li>.eslintrc.js</li>
<li>.gitignore</li>
<li>babel.config.js</li>
<li>package.json</li>
<li>postcss.config.js</li>
<li>README.md</li>
</ul>
<p>以上是项目根目录，3.x对比2.x文件结构明显精简了不少，多了一个public文件夹用于存放静态文件少了config、build等一系列的配置文件，这些配置文件都被放在了node_modules\@vue文件下</p>
<h2 id="browserslist"><a href="#browserslist" class="headerlink" title="browserslist"></a>browserslist</h2><p>根目录中多了一个.browserslist文件，可以指定项目的目标浏览器的范围<br>用于转译的 JavaScript 特性和添加CSS 浏览器前缀，可以减少兼容代码提高代码质量<br>如果想少一个文件，你也可以在package.json中添加browserslist字段，参数是一个数组<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">这是默认设置，兼容所有最新版本，不支持ie8以下</span><br><span class="line">&gt; <span class="number">1</span>%</span><br><span class="line">last <span class="number">2</span> versions</span><br><span class="line">not ie &lt;= <span class="number">8</span></span><br></pre></td></tr></table></figure></p>
<p>使用 npx browserslist 可以查看项目的浏览器兼容情况<br>将需要支持的目标浏览器参数放在文件中就好</p>
<table>
<thead>
<tr>
<th style="text-align:center">参数</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">&gt; 1%</td>
<td style="text-align:center">全球超过1%人使用的浏览器</td>
</tr>
<tr>
<td style="text-align:center">&gt; 5% in US</td>
<td style="text-align:center">使用美国使用情况统计，接受两个字母的<a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements" target="_blank" rel="noopener">国家/地区代码</a></td>
</tr>
<tr>
<td style="text-align:center">&gt; 5% in my stats</td>
<td style="text-align:center">使用<a href="https://github.com/browserslist/browserslist#custom-usage-data" target="_blank" rel="noopener">自定义使用数据</a></td>
</tr>
<tr>
<td style="text-align:center">last 2 versions</td>
<td style="text-align:center">所有浏览器兼容到最后两个版本根据CanIUse.com追踪的版本</td>
</tr>
<tr>
<td style="text-align:center">Firefox ESR</td>
<td style="text-align:center">火狐最新版本</td>
</tr>
<tr>
<td style="text-align:center">Firefox &gt; 20</td>
<td style="text-align:center">指定版本范围</td>
</tr>
<tr>
<td style="text-align:center">not ie &lt;=8</td>
<td style="text-align:center">方向排除部分版本</td>
</tr>
<tr>
<td style="text-align:center">Firefox 12.1</td>
<td style="text-align:center">指定浏览器版本</td>
</tr>
<tr>
<td style="text-align:center">since 2013</td>
<td style="text-align:center">2013年之后发布的所有版本</td>
</tr>
</tbody>
</table>
<p>更多请查看官方文档</p>
<h2 id="vue-cli服务"><a href="#vue-cli服务" class="headerlink" title="vue-cli服务"></a>vue-cli服务</h2><p>在一个 Vue CLI 项目中，@vue/cli-service 安装了一个名为 vue-cli-service 的命令。<br>你可以在 npm scripts 中以 vue-cli-service、或者从终端中以 ./node_modules/.bin/vue-cli-service 访问这个命令<br> Vue CLI 项目有三个模式： development 模式用于启动，production 模式用于打包和e2e测试，test 模式用于unit测试<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">启动</span><br><span class="line">serve:vue-cli-service serve</span><br><span class="line"></span><br><span class="line">  -<span class="ruby">-open    在服务器启动时打开浏览器</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">  --copy    在服务器启动时将 URL 复制到剪切版</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">  --mode    指定环境模式 (默认值：development)</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">  --host    指定 host (默认值：<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>)</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">  --port    指定 port (默认值：<span class="number">8080</span>)</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">  --https   使用 https (默认值：<span class="literal">false</span>)</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">打包</span></span><br><span class="line"><span class="ruby"><span class="symbol">build:</span>vue-cli-service build</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">  --modern 使用现代模式构建应用，为现代浏览器交付原生支持的 ES2015 代码，并生成一个兼容老浏览器的包用来自动回退。</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">  --target 允许你将项目中的任何组件以一个库或 Web Components 组件的方式进行构建。更多细节请查阅构建目标。</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">  --report 和 --report-json 会根据构建统计生成报告，它会帮助你分析包中包含的模块们的大小</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">测试</span></span><br><span class="line"><span class="ruby">   <span class="symbol">test:</span> vue-cli-service <span class="symbol">test:</span>e2e  端到端测试</span></span><br><span class="line"><span class="ruby">         vue-cli-service <span class="symbol">test:</span>unit  单元测试</span></span><br></pre></td></tr></table></figure></p>
<h2 id="现代模式"><a href="#现代模式" class="headerlink" title="现代模式"></a>现代模式</h2><p>为了兼容那些不支持js新特性的浏览器我们需要Babel转译，但转译后的代码笨重冗长，这次3.x提供了一个现代模式<br><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx vue-cli-service build <span class="comment">--modern</span></span><br></pre></td></tr></table></figure></p>
<p>这个命令会产生两个应用的版本：一个现代版的包，面向支持 ES modules 的现代浏览器，另一个旧版的包，面向不支持的旧浏览器<br>而且不需要我们手动去部署和设置什么，简直很贴心</p>
<ul>
<li>现代版的包会通过 <code>&lt;script type=&quot;module&quot;&gt;</code> 在被支持的浏览器中加载；它们还会使用 <code>&lt;link rel=&quot;modulepreload&quot;&gt;</code> 进行预加载</li>
<li>旧版的包会通过 <code>&lt;script nomodule&gt;</code> 加载，并会被支持 ES modules 的浏览器忽略</li>
<li>一个针对 Safari 10 中 <code>&lt;script nomodule&gt;</code> 的修复会被自动注入<h2 id="插件的添加"><a href="#插件的添加" class="headerlink" title="插件的添加"></a>插件的添加</h2>在一个已经被创建好的项目中安装一个插件,使用vue add命令<h2 id="CLI-插件安装"><a href="#CLI-插件安装" class="headerlink" title="CLI 插件安装"></a>CLI 插件安装</h2>每个 CLI 插件都会包含一个 (用来创建文件的) 生成器和一个 (用来调整 webpack 核心配置和注入命令的) 运行时插件<br>对于这种cli插件需要加入@vue的前缀，这个命令将 @vue/eslint 解析为完整的包名 @vue/cli-plugin-eslint，然后从 npm 安装它，调用它的生成器<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">插件添加</span><br><span class="line">vue <span class="keyword">add</span><span class="bash"> @vue/eslint</span></span><br><span class="line"><span class="bash"></span></span><br><span class="line"><span class="bash">向被安装的插件传递生成器选项 (这样做会跳过命令提示)</span></span><br><span class="line"><span class="bash">vue add @vue/eslint --config airbnb --lintOn save</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="第三方插件安装"><a href="#第三方插件安装" class="headerlink" title="第三方插件安装"></a>第三方插件安装</h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">安装并调用 vue-cli-plugin-apollo，不带 @vue 前缀，该命令会换作解析一个 unscoped 的包</span><br><span class="line">执行此命令后src里会创建一个plugins文件夹，里面会自动生成关于插件的配置文件</span><br><span class="line">vue <span class="keyword">add</span><span class="bash"> axios</span></span><br><span class="line"><span class="bash"></span></span><br><span class="line"><span class="bash">基于一个指定的 scope 使用第三方插件，如果一个插件名为 @foo/vue-cli-plugin-bar，你可以这样添加它：</span></span><br><span class="line"><span class="bash">vue add @foo/bar</span></span><br></pre></td></tr></table></figure>
<h1 id="配置修改"><a href="#配置修改" class="headerlink" title="配置修改"></a>配置修改</h1><p>例：向所有 Sass 样式传入共享的全局变量<br>在根目录新建一个vue.config.js，加入以下配置<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  css: &#123;</span><br><span class="line">    loaderOptions: &#123;</span><br><span class="line">      <span class="comment">// 给 sass-loader 传递选项</span></span><br><span class="line">      sass: &#123;</span><br><span class="line">        <span class="comment">// @/ 是 src/ 的别名</span></span><br><span class="line">        <span class="comment">// 所以这里假设你有 `src/variables.scss` 这个文件</span></span><br><span class="line">        data: <span class="string">`@import "@/variables.scss";`</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="打包后路径问题"><a href="#打包后路径问题" class="headerlink" title="打包后路径问题"></a>打包后路径问题</h1><p>在vue.config.js文件种加入’baseUrl: ‘./‘’<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    baseUrl: <span class="string">'./'</span></span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>虽然官方说这个文件会被 @vue/cli-service 自动加载，但如果你启动项目用的是npm run serve，那么你最好使用npx vue-cli-service serve重启一下</p>
<h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><p>官方文档 <a href="https://cli.vuejs.org/zh/guide/" target="_blank" rel="noopener">https://cli.vuejs.org/zh/guide/</a><br>browserslist的github <a href="https://github.com/browserslist/browserslist" target="_blank" rel="noopener">https://github.com/browserslist/browserslist</a><br><a href="https://mp.weixin.qq.com/s/hfr2Q3FXZFIdqM_r8HrLwQ" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/hfr2Q3FXZFIdqM_r8HrLwQ</a></p>
<p>欢迎留言交流  (´▽`ʃ♡ƪ)</p>
<p></p></div><div class="meta"><i class="iconfont iconweibiaoti--" title="阅读时长">8</i><i class="iconfont iconwenzi" title="字数">2.1k</i><i class="iconfont iconshijian" title="创建时间">2018-09-20 11:17</i></div></article><article><a class="artititle" href="/2018/08/30/cordova_热更新/">cordova之HybirdApp热更新</a><div class="content ellipse"><p></p><h1 id="关于热更新"><a href="#关于热更新" class="headerlink" title="关于热更新"></a>关于热更新</h1><p>热更新App常用的更新方式。简单来说，就是在用户通过App Store下载App之后，打开App时遇到的即时更新</p>
<p>热更新就是动态下发代码，它可以使开发者在不发布新版本的情况下，修复 BUG 和发布功能，也可以绕开App Store和各种商店的审核机制，避免长时间的审核等待以及多次被拒造成的成本，也能针对顽固用户进行强制更新</p>
<h1 id="关于插件"><a href="#关于插件" class="headerlink" title="关于插件"></a>关于插件</h1><p>cordova插件<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">cordova</span> plugin <span class="keyword">add </span>cordova-hot-<span class="meta">code</span>-<span class="keyword">push-plugin </span>--save</span><br></pre></td></tr></table></figure></p>
<p>添加Cordova Hot Code Push Plugin CLI客户端<a href="https://github.com/nordnet/cordova-hot-code-push-cli" target="_blank" rel="noopener">github文档链接</a><br>用处：自动生成Hot Code Push插件（chcp.json和chcp.manifest）所需的配置文件<br>&emsp;运行本地服务器检测内容变更部署到服务器（关于自动部署看到有大佬说因为国内网络问题。。。但是我没试过因为没有aws服务器）</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cordova-hot-code-<span class="keyword">push</span>-<span class="keyword">cli</span></span><br></pre></td></tr></table></figure>
<h1 id="更新流程"><a href="#更新流程" class="headerlink" title="更新流程"></a>更新流程</h1><p>1、根据Update method的设置（后面会提到改配置，假设是resume）恢复应用程序（从后台移动到前台状态）或启动时</p>
<p>2、插件初始化，在后台加载更新模块（Update loader）</p>
<p>3、Update loader 从cordova项目配置文件config.xml中获取config-file也就是插件配置文件chcp.json 的加载路径，然后加载chcp.json获取到release 版本号，对比当前的版本号，若二者不同，说明有新版本</p>
<p>4、有新版本时Update loader会从chcp.json中获取rcontent_url并从中下载web静态文件</p>
<h1 id="自动化更新"><a href="#自动化更新" class="headerlink" title="自动化更新"></a>自动化更新</h1><h2 id="1、初始化"><a href="#1、初始化" class="headerlink" title="1、初始化"></a>1、初始化</h2><p>插件添加成功后在项目根目录执行init命令进行初始化生成配置文件<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">cordova-hcp init</span></span><br></pre></td></tr></table></figure></p>
<p>执行时会需要填写一些首选项除了第一个project name项目名称和最后一个为必填以外其他都可以回车<br><strong> 最后一个参数 </strong> “Enter full URL to directory where cordova-hcp build result will be uploaded:”这个是服务器的url，也就是更新时app从服务器下载资源的路径</p>
<p><strong> 关于倒数第二个参数 </strong> ：Update method - 何时执行更新，默认为resume</p>
<ul>
<li>start - 启动应用程序时安装更新</li>
<li>resume - 恢复应用程序（从后台移动到前台状态）或启动时安装更新</li>
<li>now - 从服务器加载后立即安装更新</li>
</ul>
<p>执行成功后可以看到项目根目录多出一个cordova-hcp.json文件<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"dzbp"</span>,   <span class="comment">// 项目名称</span></span><br><span class="line">  <span class="string">"ios_identifier"</span>: <span class="string">""</span>,   <span class="comment">// android</span></span><br><span class="line">  <span class="string">"android_identifier"</span>: <span class="string">""</span>,   <span class="comment">//  App Store上的应用程序ID。用于将用户重定向到商店的应用程序页面。</span></span><br><span class="line">  <span class="string">"update"</span>: <span class="string">"resume"</span>, <span class="comment">// 在Google Play上引用应用的应用包名称</span></span><br><span class="line">  <span class="string">"content_url"</span>: <span class="string">"https：//www"</span>  <span class="comment">// web静态资源在服务器的地址</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="2、构建命令"><a href="#2、构建命令" class="headerlink" title="2、构建命令"></a>2、构建命令</h2><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cordova-hcp build <span class="string">[Web项目路径不指定默认为www目录]</span></span><br></pre></td></tr></table></figure>
<p>执行完成后会在你的web目录下会生成两个配置文件</p>
<ul>
<li>chcp.json : 持有发布相关信息</li>
<li>chcp.manifest : 保存有关Web项目文件的信息：它们的名称（相对路径）和哈希值, 根据它插件查知道文件的增删改</li>
</ul>
<h2 id="3、修改配置"><a href="#3、修改配置" class="headerlink" title="3、修改配置"></a>3、修改配置</h2><p>在config配置中加入chcp.json文件在服务器的地址<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;chcp&gt;</span><br><span class="line">    &lt;config-file url=<span class="string">"http://www/chcp.json"</span>/&gt;</span><br><span class="line">&lt;<span class="regexp">/chcp&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>最后使用<code>cordova build</code>打包</p>
<p>app的配置就完成了，每次代码修改后只需要把代码放到服务器上，app会自动检测</p>
<h1 id="用户选择性进行更新？"><a href="#用户选择性进行更新？" class="headerlink" title="用户选择性进行更新？"></a>用户选择性进行更新？</h1><p>在项目配置文件config.xml中添加<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">chcp</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">auto-download</span> <span class="attr">enabled</span>=<span class="string">"false"</span> /&gt;</span> // 取消自动下载</span><br><span class="line">    <span class="tag">&lt;<span class="name">auto-install</span> <span class="attr">enabled</span>=<span class="string">"false"</span> /&gt;</span>  // 取消自动安装</span><br><span class="line">    <span class="tag">&lt;<span class="name">config-file</span> <span class="attr">url</span>=<span class="string">"http://120.24.77.175:8080/ehospital/views/MSUI/chcp.json"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">chcp</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="下面是一个完整的代码示例，用到了3个api"><a href="#下面是一个完整的代码示例，用到了3个api" class="headerlink" title="下面是一个完整的代码示例，用到了3个api"></a>下面是一个完整的代码示例，用到了3个api</h2><p><strong> chcp.fetchUpdate(Callback，options)  检查更新 </strong></p>
<ul>
<li>Callback接收两个参数：<br>&emsp;error：若存在不为null表示没有更新版本，或者在更新检查期间发生错误<br>&emsp;data：从本机端发送的其他数据</li>
<li>options：请求的其他选项。如果未设置 - 使用首选项config.xml</li>
</ul>
<p><strong> chcp.isUpdateAvailableForInstallation(Callback) 检查是否已加载更新并可以安装 </strong></p>
<ul>
<li>Callback接收两个参数：<br>&emsp;&emsp;error：若存在不为null表示没有加载更新或者无需安装<br>&emsp;&emsp;data：{<br>&emsp;&emsp;&emsp;&emsp;CURRENTVERSION：当前版本<br>&emsp;&emsp;&emsp;&emsp;readyToInstallVersion：准备安装版本<br>&emsp;&emsp;}</li>
</ul>
<p><strong> chcp.installUpdate(Callback) 检查是否已加载更新并可以安装 </strong></p>
<ul>
<li>Callback只有一个参数那就是error，若不为null表示安装失败包含失败信息否则便是成功</li>
</ul>
<p><a href="https://github.com/nordnet/cordova-hot-code-push/wiki/Error-codes" target="_blank" rel="noopener">错误代码详情</a>&emsp;&emsp;<a href="https://github.com/nordnet/cordova-hot-code-push/wiki/JavaScript-module" target="_blank" rel="noopener">jsAPI</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"deviceready"</span>, onDeviceReady, <span class="literal">false</span>)</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">onDeviceReady</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> chcp = <span class="built_in">window</span>.chcp</span><br><span class="line">    chcp.fetchUpdate(<span class="function">(<span class="params">error, data</span>) =&gt;</span> &#123; <span class="comment">// 检查更新</span></span><br><span class="line">    alert(data)</span><br><span class="line">    <span class="keyword">if</span> (error) &#123; </span><br><span class="line">      alert(<span class="string">'error'</span>, error.code, error.description) <span class="comment">// 表示没有更新版本，或者其他错误</span></span><br><span class="line">    &#125; <span class="keyword">else</span> chcp.isUpdateAvailableForInstallation(<span class="function">(<span class="params">error, data</span>) =&gt;</span> &#123; <span class="comment">// 检查是否已加载更新并准备安装</span></span><br><span class="line">        <span class="keyword">if</span> (error) &#123;</span><br><span class="line">          alert(<span class="string">'No update was loaded =&gt; nothing to install'</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> ( <span class="built_in">window</span>.confirm(<span class="string">'检测到新版本，是否更新'</span>) ) &#123;</span><br><span class="line">            chcp.installUpdate(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;  <span class="comment">// 安装更新</span></span><br><span class="line">              <span class="keyword">if</span> (error) &#123;</span><br><span class="line">                alert(<span class="string">'Failed to install the update with error code: '</span> + error.code)</span><br><span class="line">                alert(error.description)</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                alert(<span class="string">'Update installed!'</span>)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">window</span>.alert(<span class="string">'您已拒绝更新'</span>)</span><br><span class="line">          &#125;</span><br><span class="line">          alert(<span class="string">'Current content version: '</span> + data.currentVersion)</span><br><span class="line">          alert(<span class="string">'Ready to be installed:'</span> + data.readyToInstallVersion)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><p>Cordova Hot Code Push Plugin CLI client <a href="https://github.com/nordnet/cordova-hot-code-push-cli" target="_blank" rel="noopener">https://github.com/nordnet/cordova-hot-code-push-cli</a></p>
<p>cordova-hot-code-push wiki <a href="https://github.com/nordnet/cordova-hot-code-push/wiki/Update-workflow" target="_blank" rel="noopener">https://github.com/nordnet/cordova-hot-code-push/wiki/Update-workflow</a></p>
<p>Cordova 代码热更新 <a href="https://www.jianshu.com/p/55fd5e9f96ea" target="_blank" rel="noopener">https://www.jianshu.com/p/55fd5e9f96ea</a></p>
<p></p></div><div class="meta"><i class="iconfont iconweibiaoti--" title="阅读时长">5</i><i class="iconfont iconwenzi" title="字数">1.4k</i><i class="iconfont iconshijian" title="创建时间">2018-08-30 15:57</i></div></article><article><a class="artititle" href="/2018/08/27/cordova_图片获取上传/">cordova之相机拍照以及本地图片获取上传</a><div class="content ellipse"><p></p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">图片获取</span><br><span class="line">此插件定义了一个全局navigator.camera对象，该对象提供用于拍摄照片和从系统图像库中选择图像的API</span><br><span class="line">支持平台：<span class="keyword">Android、BlackBerry、Browser、Firefox、FireOS、iOS、Windows、WP8、Ubuntu</span></span><br><span class="line"><span class="keyword">cordova </span>plugin <span class="keyword">add </span>cordova-plugin-camera</span><br><span class="line"></span><br><span class="line">图片上传</span><br><span class="line">这个插件定义了全局FileTransfer，FileUploadOptions构造函数，用于传输文件</span><br><span class="line">看你上传的方式如果你使用<span class="keyword">bs64就可以不用这个插件</span></span><br><span class="line"><span class="keyword">支持平台：Amazon </span>Fire OS、<span class="keyword">Android、BlackBerry </span><span class="number">10</span>、<span class="keyword">Browser、Firefox </span>OS**、iOS、Windows Phone <span class="number">7</span> <span class="keyword">and </span><span class="number">8</span>*、Windows</span><br><span class="line"><span class="symbol">cordova</span> plugin <span class="keyword">add </span>cordova-plugin-file-transfer</span><br></pre></td></tr></table></figure>
<h1 id="camera-getPicture官方文档"><a href="#camera-getPicture官方文档" class="headerlink" title="camera.getPicture官方文档"></a>camera.getPicture<a href="http://cordova.axuer.com/docs/zh-cn/latest/reference/cordova-plugin-camera/index.html" target="_blank" rel="noopener">官方文档</a></h1><p>camera.getPicture 功能打开设备的默认相机应用程序接受三个参数：调用成功的回调，失败的回调，以及调用方法需要设置的参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">navigator.camera.getPicture(Success, <span class="built_in">Error</span>, Options)</span><br><span class="line">imageFile () &#123;</span><br><span class="line">  navigator.camera.getPicture(success, error, &#123; <span class="attr">quality</span>: <span class="number">50</span>,</span><br><span class="line">    destinationType: Camera.DestinationType.DATA_URL, <span class="attr">sourceType</span>:<span class="number">0</span> &#125;)</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">success</span>(<span class="params">imageURI</span>) </span>&#123;</span><br><span class="line">      alert(<span class="built_in">JSON</span>.stringify(imageURI))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">error</span>(<span class="params">message</span>) </span>&#123;</span><br><span class="line">      alert(<span class="built_in">JSON</span>.stringify(message))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2 id="自定义参数"><a href="#自定义参数" class="headerlink" title="自定义参数"></a>自定义参数</h2><p>这里只列举了一些常用的 api，而且某些参数在不同平台表现会有差异，建议你去官方文档查看更详细的参数</p>
<p>quality：默认 50，保存图像的质量，表示为 0-100 的范围，其中 100 通常为全分辨率，不会因文件压缩而丢失。</p>
<p>destinationType：调用成功的返回值格式</p>
<p>DATA_URL（返回 base64 编码的字符串）、FILE_URI（文件 url）、NATIVE_URI（原生 url）</p>
<p>sourceType：图片来源</p>
<p>PHOTOLIBRARY(从图片库中选择图片（与 SAVEDPHOTOALBUM for Android 相同）)</p>
<p>CAMERA(相机拍照)</p>
<p>SAVEDPHOTOALBUM(从图片库中选择图片（与 Android 的 PHOTOLIBRARY 相同）)</p>
<p>Direction: 摄像头是前置还是后置，这个当然是 PictureSourceType 等于 CAMERA 时有效</p>
<p>BACK（前置） FRONT（后置）</p>
<p>saveToPhotoAlbum：拍照后将图像是否保存到设备上的相册中，返回 boolean</p>
<p>correctOrientation：拍照时是否旋转图像以校正设备的方向，返回 boolean</p>
<p>EncodingType：图片格式，可选 JPEG 或者 JPEG</p>
<p>MediaType：能否选择视频或者其他媒体类型，默认只能选择图片</p>
<p>popoverOptions：仅限 iOS 的选项，用于在从 iPad 的库或相册中选择图像时指定弹出框的锚元素位置和箭头方向</p>
<h1 id="FileTransfer官方文档"><a href="#FileTransfer官方文档" class="headerlink" title="FileTransfer官方文档"></a>FileTransfer<a href="http://cordova.axuer.com/docs/zh-cn/latest/reference/cordova-plugin-file-transfer/index.html" target="_blank" rel="noopener">官方文档</a></h1><p>分为上传和下载</p>
<h2 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h2><p>options：可选参数（Object）<br>  fileKey：表单元素的名称。默认为file<br>  fileName：在服务器上保存文件时使用的文件名。默认为image.jpg<br>  httpMethod：要使用的HTTP方法 - PUT或者POST。默认为POST<br>  mimeType：要上载的数据的mime类型。默认为image/jpeg<br>  params：一组可选的键/值对，用于传递HTTP请求。（对象，键/值 - DOMString）<br>  chunkedMode：是否以分块流模式上传数据。默认为true。（布尔）<br>  headers：标题名称/标题值的映射。使用数组指定多个值。在iOS，FireOS和Android上，如果存在名为Content-Type的标题，则不会使用多部分表单数据<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ft = <span class="keyword">new</span> FileTransfer()</span><br><span class="line">ft.upload(fileURL,<span class="built_in">encodeURI</span>(<span class="string">"http://some.server.com/upload.php"</span>), successCallback, errorCallback, options)</span><br><span class="line">参数：文件地址，上传接口，成功回调，失败回调，上传需设置的可选参数</span><br></pre></td></tr></table></figure></p>
<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ft = <span class="keyword">new</span> FileTransfer();</span><br><span class="line">fileTransfer.download(uri, fileURL,successCallback successCallback, errorCallback,<span class="literal">false</span>,&#123;</span><br><span class="line">        headers: &#123;</span><br><span class="line">            <span class="string">"Authorization"</span>: <span class="string">"Basic dGVzdHVzZXJuYW1lOnRlc3RwYXNzd29yZA=="</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line">参数：服务器url，设备上文件的文件系统URL，成功回调，失败回调，上传需设置的可选参数，是否接受所有安全证书，可选参数目前只支持header</span><br></pre></td></tr></table></figure>
<p></p></div><div class="meta"><i class="iconfont iconweibiaoti--" title="阅读时长">3</i><i class="iconfont iconwenzi" title="字数">830</i><i class="iconfont iconshijian" title="创建时间">2018-08-27 12:30</i></div></article><article><a class="artititle" href="/2018/08/24/cordova_设备信息获取/">cordova获取设备信息以及sim卡MSISDN等信息</a><div class="content ellipse"><p></p><p><img src="http://cordova.axuer.com/static/img/cordova_bot.png" alt="示例图片"></p>
<h1 id="设备信息获取"><a href="#设备信息获取" class="headerlink" title="设备信息获取"></a>设备信息获取</h1><p>支持平台：Android、Browser、iOS、Windows、OSX<br>这是cordova官方插件，附上<a href="https://www.npmjs.com/package/cordova-plugin-sim" target="_blank" rel="noopener">官方文档</a><br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">插件安装</span><br><span class="line">cordova plugin <span class="keyword">add</span><span class="bash"> cordova-plugin-device</span></span><br></pre></td></tr></table></figure></p>
<h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"deviceready"</span>, onDeviceReady, <span class="literal">false</span>)</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">onDeviceReady</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(device.cordova) <span class="comment">// 当前cordova的版本</span></span><br><span class="line">        alert(device.model) <span class="comment">// 设备的模型或产品名称</span></span><br><span class="line">        alert(device.platform)  <span class="comment">// 获取操作系统</span></span><br><span class="line">        alert(device.uuid) <span class="comment">// 设备通用唯一标识uuid</span></span><br><span class="line">        alert(device.version) <span class="comment">// 操作系统版本</span></span><br><span class="line">        alert(device.isVirtual) <span class="comment">// 判断设备是否在虚拟机上运行,返回Boolean</span></span><br><span class="line">        alert(device.serial)  <span class="comment">// 设备序列号</span></span><br><span class="line">        alert(device.serial)  <span class="comment">// 设备制造商</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="sim卡信息获取"><a href="#sim卡信息获取" class="headerlink" title="sim卡信息获取"></a>sim卡信息获取</h1><p>支持平台：Android、iOS、Windows Phone 7 and 8<br>附上<a href="https://www.npmjs.com/package/cordova-plugin-sim" target="_blank" rel="noopener">npm文档</a><br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">插件安装</span><br><span class="line">cordova plugin <span class="keyword">add</span><span class="bash"> cordova-plugin-sim</span></span><br></pre></td></tr></table></figure></p>
<h2 id="使用方法，更多参数查看文档"><a href="#使用方法，更多参数查看文档" class="headerlink" title="使用方法，更多参数查看文档"></a>使用方法，更多参数查看文档</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"deviceready"</span>, onDeviceReady, <span class="literal">false</span>)</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">onDeviceReady</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">window</span>.plugins.sim.getSimInfo(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">        alert(res.carrierName) <span class="comment">// 供应商 (SPN)</span></span><br><span class="line">        alert(res.countryCode) <span class="comment">// ISO 国家代码[中国是CN]</span></span><br><span class="line">        alert(res.mcc) <span class="comment">// 移动信号国家码</span></span><br><span class="line">        alert(res.mnc) <span class="comment">// 移动网络号码</span></span><br><span class="line">      &#125;, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="string">'error'</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2 id="关于MSISDN获取"><a href="#关于MSISDN获取" class="headerlink" title="关于MSISDN获取"></a>关于MSISDN获取</h2><p>sim插件的phoneNumber这个获取MSISDN（手机号码）的参数还有deviceId、simSerialNumber、subscriptionId等等，官方文档表示了有时只能拿到一个空字符串</p>
<h3 id="原因："><a href="#原因：" class="headerlink" title="原因："></a>原因：</h3><p>MSISDN可以存储在SIM卡上，但大部分电话运营商都不会将MSISDN存储在SIM卡上，有以下一些原因：<br>  动态MSISDN分配：首次使用预付费SIM时，有时会为其分配MSISDN。这意味着网络具有可用的MSISDN池，并在新的预付费SIM上线时分配它们。这意味着当SIM卡出厂时，它们还没有MSISDN，这意味着在发送SIM卡之前无法存储MSISDN。有些网络在一段时间不活动后会过期’MSISDN分配，特别是当它们的可用数量不足时，并将这些数字返回到可用池。<br>  移动号码可携带性：一些国家/地区允许移动用户保留其MSISDN但更改网络。这意味着MSISDN将从用于1个网络的SIM移动到用于另一个网络的SIM。</p>
<p>因此SIM上的MSISDN条目通常为空，用户可以在SIM卡上存储MSISDN或者任意数字<br>所以MSISDN通常为空，但如果你获取到了也是因为用户在设备中设置“我的电话号码”什么的所以也并不保证一定正确</p>
<p>可能的方法：通过WAP / WEB，当移动运营商在标题中包含MSISDN时（你可以做一些webview技巧来查看标题是通过的 - 但是你只看到这些如果是网络支持它，如果用户在移动数据上 - 即如果用户在WiFi上，它将无法工作</p>
<p>来源:<a href="https://stackoverflow.com/questions/10695601/msisdn-is-it-a-sim-card-data-why-all-the-provided-function-from-blackberry-a" target="_blank" rel="noopener">https://stackoverflow.com/questions/10695601/msisdn-is-it-a-sim-card-data-why-all-the-provided-function-from-blackberry-a</a></p>
<p>欢迎留言交流  (´▽`ʃ♡ƪ)</p>
<p></p></div><div class="meta"><i class="iconfont iconweibiaoti--" title="阅读时长">2</i><i class="iconfont iconwenzi" title="字数">681</i><i class="iconfont iconshijian" title="创建时间">2018-08-24 11:25</i></div></article><article><a class="artititle" href="/2018/08/23/markdown/">markdown语法(备忘)</a><div class="content ellipse"><p></p><h2 id="转义"><a href="#转义" class="headerlink" title="转义"></a>转义</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">特殊符号使用 \ 转义，例 \* \# \&gt;</span><br></pre></td></tr></table></figure>
<h2 id="字体颜色"><a href="#字体颜色" class="headerlink" title="字体颜色"></a>字体颜色</h2><font face="黑体">我是黑体字</font><br><font face="微软雅黑">我是微软雅黑</font><br><font face="STCAIYUN">我是华文彩云</font><br><font color="#bb1509" size="4" face="黑体">color=#0099ff size=72 face=”黑体”</font><br><font color="#bb1509" size="72">color=#00ffff</font><br><font color="gray" size="72">color=gray</font>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">"黑体"</span>&gt;</span>我是黑体字<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">"微软雅黑"</span>&gt;</span>我是微软雅黑<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">"STCAIYUN"</span>&gt;</span>我是华文彩云<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">#0099ff</span> <span class="attr">size</span>=<span class="string">7</span> <span class="attr">face</span>=<span class="string">"黑体"</span>&gt;</span>color=#0099ff size=72 face="黑体"<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">#00ffff</span> <span class="attr">size</span>=<span class="string">72</span>&gt;</span>color=#00ffff<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">gray</span> <span class="attr">size</span>=<span class="string">72</span>&gt;</span>color=gray<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1535269125851&amp;di=5b30256aeac0e1016d165ded3ccaa568&amp;imgtype=0&amp;src=http%3A%2F%2Fnote.youdao.com%2Fiyoudao%2Fwp-content%2Fuploads%2F2016%2F09%2F8881.jpg" alt="示例图片"></p>
<p><a href="https://www.appinn.com/markdown/index.html" target="_blank" rel="noopener">官方文档</a></p>
<h2 id="空格"><a href="#空格" class="headerlink" title="空格"></a>空格</h2><p>半方大的空白&ensp;或&#8194;<br>全方大的空白&emsp;或&#8195;<br>不断行的空白格&nbsp;或&#160;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">半方大的空白&amp;ensp;或&amp;#8194;</span><br><span class="line">全方大的空白&amp;emsp;或&amp;#8195;</span><br><span class="line">不断行的空白格&amp;nbsp;或&amp;#160;</span><br></pre></td></tr></table></figure>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">少量代码使用 ` 一个反引号包裹</span><br><span class="line">多行代码使用三个反引号包裹</span><br></pre></td></tr></table></figure>
<p>使用三个反引号包裹并指定语言</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">'hello world'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>支持的语言：1c, abnf, accesslog, actionscript, ada, apache, applescript, arduino, armasm, asciidoc, aspectj, autohotkey, autoit, avrasm, awk, axapta, bash, basic, bnf, brainfuck, cal, capnproto, ceylon, clean, clojure, clojure-repl, cmake, coffeescript, coq, cos, cpp, crmsh, crystal, cs, csp, css, d, dart, delphi, diff, django, dns, dockerfile, dos, dsconfig, dts, dust, ebnf, elixir, elm, erb, erlang, erlang-repl, excel, fix, flix, fortran, fsharp, gams, gauss, gcode, gherkin, glsl, go, golo, gradle, groovy, haml, handlebars, haskell, haxe, hsp, htmlbars, http, hy, inform7, ini, irpf90, java, javascript, json, julia, kotlin, lasso, ldif, leaf, less, lisp, livecodeserver, livescript, llvm, lsl, lua, makefile, markdown, mathematica, matlab, maxima, mel, mercury, mipsasm, mizar, mojolicious, monkey, moonscript, n1ql, nginx, nimrod, nix, nsis, objectivec, ocaml, openscad, oxygene, parser3, perl, pf, php, pony, powershell, processing, profile, prolog, protobuf, puppet, purebasic, python, q, qml, r, rib, roboconf, rsl, ruby, ruleslanguage, rust, scala, scheme, scilab, scss, smali, smalltalk, sml, sqf, sql, stan, stata, step21, stylus, subunit, swift, taggerscript, tap, tcl, tex, thrift, tp, twig, typescript, vala, vbnet, vbscript, vbscript-html, verilog, vhdl, vim, x86asm, xl, xml, xquery, yaml, zephir</p>
<h2 id="字体大小"><a href="#字体大小" class="headerlink" title="字体大小"></a>字体大小</h2><h1 id="1号"><a href="#1号" class="headerlink" title="1号"></a>1号</h1><h2 id="2号"><a href="#2号" class="headerlink" title="2号"></a>2号</h2><h3 id="3号"><a href="#3号" class="headerlink" title="3号"></a>3号</h3><h4 id="4号"><a href="#4号" class="headerlink" title="4号"></a>4号</h4><h5 id="5号"><a href="#5号" class="headerlink" title="5号"></a>5号</h5><h6 id="6号"><a href="#6号" class="headerlink" title="6号"></a>6号</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 1号</span><br><span class="line">## 2号</span><br><span class="line">### 3号</span><br><span class="line">#### 4号</span><br><span class="line">##### 5号</span><br><span class="line">###### 6号</span><br></pre></td></tr></table></figure>
<h2 id="字体着重"><a href="#字体着重" class="headerlink" title="字体着重"></a>字体着重</h2><p><strong>这是加粗的文字</strong><br><em>这是倾斜的文字</em>`<br><strong><em>这是斜体加粗的文字</em></strong><br><del>这是加删除线的文字</del></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">**这是加粗的文字**</span><br><span class="line">*这是倾斜的文字*`</span><br><span class="line">***这是斜体加粗的文字***</span><br><span class="line">~~这是加删除线的文字~~</span><br></pre></td></tr></table></figure>
<h2 id="字体缩进"><a href="#字体缩进" class="headerlink" title="字体缩进"></a>字体缩进</h2><blockquote>
<p>这是引用的内容</p>
<blockquote>
<p>这是引用的内容</p>
<blockquote>
<blockquote>
<blockquote>
<p>这是引用的内容</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;这是引用的内容</span><br><span class="line">&gt;&gt;这是引用的内容</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;这是引用的内容</span><br></pre></td></tr></table></figure>
<h2 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">三个以上的 - 或者 * ,效果一样</span><br><span class="line">***</span><br></pre></td></tr></table></figure>
<hr>
<hr>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line">## 图片引用</span><br><span class="line"></span><br><span class="line">``` text</span><br><span class="line">![图片alt](图片地址 <span class="string">''</span>图片title<span class="string">''</span>)</span><br></pre></td></tr></table></figure>
<h2 id="超链接"><a href="#超链接" class="headerlink" title="超链接"></a>超链接</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[百度](http://baidu.com)</span><br></pre></td></tr></table></figure>
<h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><ul>
<li>列表</li>
</ul>
<p>1.列表内容<br>2.列表内容<br>3.列表内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">无序列表，使用- + *效果一样</span><br><span class="line">- 列表</span><br><span class="line">+ 列表</span><br><span class="line">* 列表</span><br><span class="line"></span><br><span class="line">有序列表</span><br><span class="line">1.列表内容</span><br><span class="line">2.列表内容</span><br><span class="line">3.列表内容</span><br><span class="line"></span><br><span class="line">注意：符号跟内容之间要有一个空格</span><br></pre></td></tr></table></figure>
<h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><table>
<thead>
<tr>
<th>表头</th>
<th style="text-align:center">表头</th>
<th style="text-align:right">表头</th>
</tr>
</thead>
<tbody>
<tr>
<td>内容</td>
<td style="text-align:center">内容</td>
<td style="text-align:right">内容</td>
</tr>
<tr>
<td>内容</td>
<td style="text-align:center">内容</td>
<td style="text-align:right">内容</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">表头|表头|表头</span><br><span class="line">---|:--:|---:</span><br><span class="line">内容|内容|内容</span><br><span class="line">内容|内容|内容</span><br><span class="line"></span><br><span class="line">| 左对齐标题 | 右对齐标题 | 居中对齐标题 |</span><br><span class="line">| :------| ------: | :------: |</span><br><span class="line"></span><br><span class="line">表格内换行使用 &lt;/br&gt; 标签</span><br></pre></td></tr></table></figure>
<h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><p><a href="http://baidu.com" target="_blank" rel="noopener">百度</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[百度](http://baidu.com)</span><br></pre></td></tr></table></figure>
<p></p></div><div class="meta"><i class="iconfont iconweibiaoti--" title="阅读时长">3</i><i class="iconfont iconwenzi" title="字数">774</i><i class="iconfont iconshijian" title="创建时间">2018-08-23 18:18</i></div></article><article><a class="artititle" href="/2018/08/22/hexo/">关于hexo的常用命令(备忘)</a><div class="content ellipse"><p></p><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><p><a href="https://hexo.io/zh-cn/api/" target="_blank" rel="noopener">官方文档</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ git clone &apos;远程仓库&apos; themes/ &apos;本地文件名称&apos;</span><br><span class="line">hexo s 启动服务</span><br><span class="line">hexo clean  清除缓存文件 (db.json) 和已生成的静态文件 (public)</span><br><span class="line">hexo g  部署之前预先生成静态文件</span><br><span class="line">hexo d  部署</span><br><span class="line"></span><br><span class="line">hexo new &lt;title&gt; 新建一篇文章</span><br><span class="line">hexo new draft &lt;title&gt;  新建一篇草稿</span><br><span class="line">hexo publish &lt;title&gt; 将草稿移入posts文件夹</span><br><span class="line"></span><br><span class="line">图片上传插件</span><br><span class="line">npm install hexo-asset-image --save</span><br><span class="line"></span><br><span class="line">代码上传到github所需要的依赖包</span><br><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<p>hexo部署报错：The file will have its original line endings in your working directory.</p>
<ul>
<li>删除.deploy_git文件夹</li>
<li>运行 git config –global core.autocrlf false</li>
<li>正常流程 hexo clean / hexo g / hexo d</li>
</ul>
<p></p></div><div class="meta"><i class="iconfont iconweibiaoti--" title="阅读时长">1</i><i class="iconfont iconwenzi" title="字数">176</i><i class="iconfont iconshijian" title="创建时间">2018-08-22 18:24</i></div></article><article><a class="artititle" href="/2018/08/22/python_selenium/">python爬虫之selenium自动化测试让你爬虫更像用户</a><div class="content ellipse"><p></p><p>全程序自动化操作<br><img src="/2018/08/22/python_selenium/selenium.gif" alt="demo效果"></p>
<p>先科普一下selenium，这是一个用于Web应用程序测试的工具，支持多种浏览器多种语言</p>
<p>框架底层使用JavaScript模拟真实用户对浏览器进行操作，Selenium测试直接运行在浏览器中，代码执行时，可以自动打开浏览器/表单输入/按钮点击，就像真实用户在操作的一样</p>
<p>真真是反爬虫的一大神器啊</p>
<p>先附上文档了解一些基础知识：<a href="https://selenium-python.readthedocs.io/index.html" target="_blank" rel="noopener">官方文档</a><a href="https://selenium-python-zh.readthedocs.io/en/latest/installation.html" target="_blank" rel="noopener">中文文档</a></p>
<h1 id="关于安装"><a href="#关于安装" class="headerlink" title="关于安装"></a>关于安装</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmd命令：pip3 install selenium</span><br></pre></td></tr></table></figure>
<p>下载谷歌驱动安装：<a href="https://sites.google.com/a/chromium.org/chromedriver/downloads" target="_blank" rel="noopener">https://sites.google.com/a/chromium.org/chromedriver/downloads</a> </p>
<p>放在谷歌文件夹C:\Program Files (x86)\Google\Chrome\Application下再把这路径加入环境变量</p>
<h1 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h1><p><em>Xpath是非常强大的元素查找方式，它可以定位到页面上的任意元素</em></p>
<p>我这里只介绍了一些今天这个实例会用到的</p>
<h2 id="首先先了解一下它的一些语法"><a href="#首先先了解一下它的一些语法" class="headerlink" title="首先先了解一下它的一些语法"></a><em>首先先了解一下它的一些语法</em></h2><p>// ： 相对路径，以这个开头表示从寻找文档的根节点开始查找元素，若出现在xpath路径中则表示寻找父节点下任意符合条件的子节点，不管嵌套了多少层级<br>/：绝对路径，表示寻找父节点下的第一层子元素也就是直接子元素<br>“//标签名[@属性名=’属性值’]”：表示从根目录查找和标签名、属性值相匹配的元素<br>几乎所有的Xpath路径都是以上面3种方法来组合的</p>
<h2 id="精准定位"><a href="#精准定位" class="headerlink" title="精准定位"></a>精准定位</h2><p>以下面这个百度文库这段html举例</p>
<p><img src="http://pe5zctnu4.bkt.clouddn.com/selenium.PNG" alt="shili"></p>
<p>要获取输入框怎么写，写法不只一种哈，这地方你也可以直接使用input的id获取元素（一个页面正常来讲不会有相同的id）</p>
<p>input = browser.find_element(By.XPATH, “//form[@name=’ftop’]//input[@id=’kw’]”)</p>
<p>上面这行是用的是find_element是查找单个元素，api在下面可以先看下</p>
<p>表示从根目录查找第一个匹配路径 name为flop的form标签 ，找到这个元素之后再去他所有子元素里面查找id为kw的input框</p>
<p>假设这个页面有两个name为ftop的form标签（name一样的form标签讲道理一个页面是不会有两个现在只是假设，有可能你会遇到class名一样的div标签）</p>
<p>那么获取第二个form标签：”//form[@name=’ftop’][2]//input[@id=’kw’]”, 就在大括号后面加上他的索引，索引是从1开始的</p>
<h2 id="模糊定位"><a href="#模糊定位" class="headerlink" title="模糊定位"></a>模糊定位</h2><p>contains关键字：input = browser.find_element(By.XPATH, “//input[contains(@id, ‘kw’)]”)<br>表示寻找页面中id属性值包含kw所有input元素</p>
<p>text关键字：input = browser.find_element(By.XPATH, “//button[contains(text(), ‘搜索’)]”)<br>表示寻找页面中文字中包含有搜索的所有button元素</p>
<p>starts-with关键字：input = browser.find_element(By.XPATH, “//a[starts-with(@href,’http://‘)]”)<br>表示寻找页面中href属性以http://开头的a标签</p>
<p>ends-with关键字：input = browser.find_element(By.XPATH, “//a[ends-with(@href,’com’)]”)<br>表示寻找页面中href属性以’com’结尾的a标签<br>关于ends-widh我在使用的时候会报错提示语法不正确而且网上关于ends-with介绍也很少所以我没有找到原因如果大家知道欢迎留言告诉我不胜感激 (´▽`ʃ♡ƪ)</p>
<p><em>这是一个简单的关于用selenium和xpath来做模糊查询的小实例</em><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">chrome_options = Options()</span><br><span class="line"></span><br><span class="line">chrome_options.add_argument(<span class="string">"--headless"</span>)</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome(chrome_options=chrome_options)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开百度网址</span></span><br><span class="line"></span><br><span class="line">browser.get(<span class="string">"https://www.baidu.com/"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取第一个http链接</span></span><br><span class="line"></span><br><span class="line">element_contains = browser.find_element(By.XPATH, <span class="string">"//a[contains(@href, 'http://')]"</span>)</span><br><span class="line"></span><br><span class="line">print(element_contains.text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取第一个包含文字中包含'地图'的a标签</span></span><br><span class="line">element_text = browser.find_element(By.XPATH, <span class="string">"//a[contains(text(), '地图')]"</span>)</span><br><span class="line"></span><br><span class="line">print(element_text.text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取第一个文字以'贴'开头的a标签</span></span><br><span class="line">element_starts = browser.find_element(By.XPATH, <span class="string">"//a[starts-with(text(), '贴')]"</span>)</span><br><span class="line"></span><br><span class="line">print(element_starts.text)</span><br><span class="line"></span><br><span class="line">browser.close()</span><br></pre></td></tr></table></figure></p>
<h2 id="selenium的一些常用api"><a href="#selenium的一些常用api" class="headerlink" title="selenium的一些常用api"></a>selenium的一些常用api</h2><p><em>find_element和find_elements的使用</em></p>
<p>browser.find_element(By.XPATH, ‘//button[text()=”Some text”]’)  //单个元素获取</p>
<p>browser.find_elements(By.XPATH, ‘//button’) //多个元素获取</p>
<p>ID = “id”<br>XPATH = “xpath”<br>LINK_TEXT = “link text”<br>PARTIAL_LINK_TEXT = “partial link text”<br>NAME = “name”<br>TAG_NAME = “tag name”<br>CLASS_NAME = “class name”<br>CSS_SELECTOR = “css selector”</p>
<p><em>单个元素选取（多个元素选取：就是在element后面加一个s，比如find_elements_by_id）：</em></p>
<p>find_element_by_id<br>find_element_by_name<br>find_element_by_xpath<br>find_element_by_link_text<br>find_element_by_partial_link_text<br>find_element_by_tag_name<br>find_element_by_class_name<br>find_element_by_css_selector</p>
<p><em>获取到标签之后的界面交互：</em></p>
<p>input.send_keys(“输入中”)<br>input.clear()  清空输入框<br>button.click()  按钮点击</p>
<p><em>常用的控制浏览器的api：</em></p>
<p>browser.back() 浏览器后退<br>browser.forward() 浏览器前进<br>browser.get(“<a href="https://www.zhihu.com/explore&quot;" target="_blank" rel="noopener">https://www.zhihu.com/explore&quot;</a>) 打开页面<br>browser.execute_script(“alert(‘To Button’)”)  执行js代码<br>print(browser.window_handles) 所有的标签<br>browser.switch_to_window(browser.window_handles[1]) 切换到指定标签页<br>browser.close() 关闭当前标签页</p>
<h1 id="代码实例"><a href="#代码实例" class="headerlink" title="代码实例"></a>代码实例</h1><h2 id="关于页面模块引入"><a href="#关于页面模块引入" class="headerlink" title="关于页面模块引入"></a>关于页面模块引入</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 引入浏览器驱动</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 这里我们需要引入浏览器内核才可以使用浏览器的无头模式，这里我引入的是chrome</span></span><br><span class="line"><span class="comment"># Gecko：是Firefox浏览器的内核</span></span><br><span class="line"><span class="comment"># Trident：是IE浏览器的内核</span></span><br><span class="line"><span class="comment"># Blink：是webkit的一个分支版本，由google开发</span></span><br><span class="line"><span class="comment"># 关于什么是无头模式：即headless browser，是一种没有界面的浏览器，主要是用作爬虫，用以捕捉Web上的各类数据</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 主要用于使用两个私有方法find_element和find_elements</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 调用键盘api</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.keys <span class="keyword">import</span> Keys</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用于时间延迟</span></span><br><span class="line"><span class="keyword">import</span> time</span><br></pre></td></tr></table></figure>
<h2 id="功能代码"><a href="#功能代码" class="headerlink" title="功能代码"></a>功能代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">chrome_options = Options()</span><br><span class="line"></span><br><span class="line">chrome_options.add_argument(<span class="string">"--headless"</span>)</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开页面</span></span><br><span class="line">browser.get(<span class="string">"https://wenku.baidu.com/"</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取搜索输入框</span></span><br><span class="line">input = browser.find_element(ID, <span class="string">'kw'</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 输入内容</span></span><br><span class="line">input.send_keys(<span class="string">"IT/计算机"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模拟回车</span></span><br><span class="line">input.send_keys(Keys.ENTER) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取'我知道了'按钮</span></span><br><span class="line">btn = browser.find_element(By.XPATH, <span class="string">"//div[@class='new-filter-box fc5']//span[@class='btn-know']"</span>)</span><br><span class="line"></span><br><span class="line">btn.click()</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">1</span>) <span class="comment"># 时间延迟</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 点击列表的第一条数据</span></span><br><span class="line">btn = browser.find_element(By.XPATH, <span class="string">"//div[@class='main']//dl[1]//a[1]"</span>)</span><br><span class="line"></span><br><span class="line">btn.click()</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将browser页面切换至当前页面</span></span><br><span class="line">browser.switch_to_window(browser.window_handles[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭当前页面</span></span><br><span class="line">browser.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换至第一个页面</span></span><br><span class="line">browser.switch_to_window(browser.window_handles[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 点击列表的第二条数据</span></span><br><span class="line">btn = browser.find_element(By.XPATH, <span class="string">"//div[@class='main']//dl[2]//a[1]"</span>)</span><br><span class="line"></span><br><span class="line">btn.click()</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 视图切换至第一个页面</span></span><br><span class="line">browser.switch_to_window(browser.window_handles[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 去往百度页面</span></span><br><span class="line">browser.get(<span class="string">"https://baidu.com/"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印所有标签</span></span><br><span class="line">print(browser.window_handles)</span><br></pre></td></tr></table></figure>
<p>开启无头模式<br>只需要修改一行代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">browser = webdriver.Chrome(chrome_options=chrome_options)</span><br></pre></td></tr></table></figure></p>
<p>欢迎留言交流  (´▽`ʃ♡ƪ)</p>
<p></p></div><div class="meta"><i class="iconfont iconweibiaoti--" title="阅读时长">6</i><i class="iconfont iconwenzi" title="字数">1.6k</i><i class="iconfont iconshijian" title="创建时间">2018-08-22 11:15</i></div></article><article><a class="artititle" href="/2018/08/20/cordova_定位/">cordova定位 + 仿钉钉打卡功能</a><div class="content ellipse"><p></p><p>最近在研究hybridApp，使用vue+cordova，现在需要实现一个钉钉打卡的功能<br>大致要实现这4个需求：地图显示、定位、地图覆盖效果、距离测量</p>
<h1 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h1><p>定位相对而言比较复杂所以优先考虑，关于定位，我尝试了3种办法</p>
<p>第一个尝试了cordova自带的插件，结果是报错：code：2，message：network provider is not available，原因是新版的插件已经删掉了关于Android版定位的代码，改为基于系统浏览器(chrome内核)进行定位，但经测试发现因为国内网络原因根本无法定位</p>
<p>第二个是用的高德地图的JavaScript API，定位虽然成功但是定位和实际位置有几百米的误差这个肯定不行</p>
<p>第三个是用的cordova的baidumaplocation插件，误差在几十米之间还可以接受</p>
<p>首先附上<a href="https://github.com/aruis/cordova-plugin-baidumaplocation" target="_blank" rel="noopener">插件github的连接</a></p>
<p>第一步你得先去<a href="http://lbsyun.baidu.com/apiconsole/key" target="_blank" rel="noopener">百度</a>创建一个应用</p>
<h2 id="创建android应用签名文件-查看SHA1"><a href="#创建android应用签名文件-查看SHA1" class="headerlink" title="创建android应用签名文件/查看SHA1"></a>创建android应用签名文件/查看SHA1</h2><p>开发版本<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">cd</span> <span class="selector-class">.android</span> 进入  <span class="selector-tag">C</span>:\<span class="selector-tag">Users</span>\<span class="selector-tag">FLTD-Y01</span>\<span class="selector-class">.android</span>&gt;</span><br><span class="line"></span><br><span class="line">调试版本使用<span class="selector-tag">debug</span><span class="selector-class">.keystore</span>，命令为：<span class="selector-tag">keytool</span> <span class="selector-tag">-list</span> <span class="selector-tag">-v</span> <span class="selector-tag">-keystore</span> <span class="selector-tag">debug</span><span class="selector-class">.keystore</span>。</span><br><span class="line"></span><br><span class="line">提示输入密钥库密码，调试版本默认密码是: <span class="selector-tag">android</span></span><br></pre></td></tr></table></figure></p>
<p>发布版本<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">建立签名文件</span><br><span class="line">$ keytool -genkey -v -keystore <span class="type">key</span>.keystore -alias <span class="type">key</span> -keyalg RSA -validity <span class="number">365</span></span><br></pre></td></tr></table></figure></p>
<p>回车后会让你输入名字公司什么的，按照提示继续就好</p>
<p>执行完成后会在文件夹内创建一个key.keystore的签名文件</p>
<p>然后就能够看到md5、SHA1什么的了</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">查看签名信息</span><br><span class="line">$ keytool -<span class="type">list</span> -v -keystore <span class="type">key</span>.keystore</span><br></pre></td></tr></table></figure>
<h2 id="安装baidumaplocation插件"><a href="#安装baidumaplocation插件" class="headerlink" title="安装baidumaplocation插件"></a>安装baidumaplocation插件</h2><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">安装baidumaplocation插件</span><br><span class="line"><span class="symbol">$</span> cordova plugin add cordova-plugin-baidumaplocation --<span class="keyword">variable</span> ANDROID_KEY=<span class="string">"你的key"</span> --<span class="keyword">variable</span> <span class="comment">IOS_KEY=</span><span class="comment">"value"</span><span class="comment"> --save</span></span><br><span class="line"> 只需要Android端或者IOS端，可以只填写一个相应的key，另外一个你还是得填点什么，不然你懂的</span><br></pre></td></tr></table></figure>
<h2 id="炒鸡简单的用法上代码"><a href="#炒鸡简单的用法上代码" class="headerlink" title="炒鸡简单的用法上代码"></a>炒鸡简单的用法上代码</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ baidumap_location.getCurrentPosition (<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">$   <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(result))</span><br><span class="line">$ &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">$   <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(error))</span><br><span class="line">$ &#125;)</span><br></pre></td></tr></table></figure>
<p>温馨提示：只有在手机上才能获取比较准确的信息，所以最好真机测试</p>
<h2 id="地图显示、覆盖物效果、距离计算"><a href="#地图显示、覆盖物效果、距离计算" class="headerlink" title="地图显示、覆盖物效果、距离计算"></a>地图显示、覆盖物效果、距离计算</h2><p>除了定位以外的其他功能我都用的是JavaScript API</p>
<p>那么第一步是去<a href="http://lbsyun.baidu.com/apiconsole/key" target="_blank" rel="noopener">百度</a>创建一个浏览器端类型的应用</p>
<p>然后你会得到一个key，然后在index引用百度地图API文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"http://api.map.baidu.com/api?v=2.0&amp;ak=您的密钥"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="最后上代码"><a href="#最后上代码" class="headerlink" title="最后上代码"></a>最后上代码</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">that.bmap = <span class="keyword">new</span> BMap.Map(<span class="string">"allmap"</span>) <span class="comment">// 新建地图实例</span></span><br><span class="line"><span class="keyword">let</span> location = <span class="keyword">new</span> BMap.Point(enterprise1, enterprise2) <span class="comment">// 新建坐标，参数为企业坐标</span></span><br><span class="line">that.bmap.centerAndZoom(location, <span class="number">16</span>) <span class="comment">//设置企业坐标为中心点坐标</span></span><br><span class="line"><span class="keyword">let</span> circle = <span class="keyword">new</span> BMap.Circle(location, <span class="number">500</span>, &#123;<span class="attr">strokeColor</span>:<span class="string">"blue"</span>, <span class="attr">strokeWeight</span>:<span class="number">2</span>, <span class="attr">strokeOpacity</span>:<span class="number">0.5</span>&#125;) <span class="comment">// 创建地图圆形覆盖效果</span></span><br><span class="line">that.bmap.addOverlay(circle)  <span class="comment">// 增加效果 </span></span><br><span class="line"><span class="keyword">let</span> pointB = <span class="keyword">new</span> BMap.Point(result.longitude, result.latitude) <span class="comment">// 新建点坐标，参数为定位获取到的坐标</span></span><br><span class="line"><span class="built_in">console</span>.log((that.bmap.getDistance(location, pointB)).toFixed(<span class="number">2</span>)) <span class="comment">// 计算距离，小于500可以打卡，反之则是超出范围</span></span><br></pre></td></tr></table></figure>
<h2 id="关于报错"><a href="#关于报错" class="headerlink" title="关于报错"></a>关于报错</h2><p>如果Android版获取到的信息是：<br>{<br>    “locType”: 505,<br>    “locTypeDescription”: “NetWork location failed because baidu location service check the key is unlegal, please check the key in AndroidManifest.xml !”,<br>    “latitude”: 5e-324,<br>    “longitude”: 5e-324,<br>    “radius”: 0,<br>    “userIndoorState”: -1,<br>    “direction”: -1<br>}<br>这个坑我是踩了，不管你信息是否获取成功过，只要出现了上面的信息就说明Key有问题</p>
<ul>
<li>检查第一步创建的百度Android应用</li>
<li>检查下生成的AndroidManifest.xml文件里面是否有如下信息<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;service android:enabled=<span class="string">"true"</span> android:name=<span class="string">"com.baidu.location.f"</span> android:process=<span class="string">":remote"</span>&gt;</span><br><span class="line">&lt;<span class="regexp">/service&gt;</span></span><br><span class="line"><span class="regexp">&lt;meta-data android:name="com.baidu.lbsapi.API_KEY" android:value="abcdefghijklmn" /</span>&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>然后重新安装</p>
<p>欢迎留言交流  (´▽`ʃ♡ƪ)</p>
<p></p></div><div class="meta"><i class="iconfont iconweibiaoti--" title="阅读时长">3</i><i class="iconfont iconwenzi" title="字数">927</i><i class="iconfont iconshijian" title="创建时间">2018-08-20 18:10</i></div></article><article><a class="artititle" href="/2018/08/15/vue_ECharts4-x/">vue+ECharts4.x地图下钻/散点分布以及热力图</a><div class="content ellipse"><p></p><p>最近用到了echarts，实现三个功能国家到省级的地图下钻和散点分布以及热力图显示</p>
<p>网上资料蛮少的，记录一个给后面的小伙伴一些参考</p>
<h1 id="demo效果如下"><a href="#demo效果如下" class="headerlink" title="demo效果如下"></a>demo效果如下</h1><p>中国地图下显示为热力图，显示精确分布点只是demo所以数据是自己写的假数据只有几条<br>点击进入省份地图，在地图之外还有那个小箭头是数据的原因不是bug改下数据就好<br><img src="/2018/08/15/vue_ECharts4-x/map.gif" alt="demo效果"></p>
<p>先上官网<a href="http://echarts.baidu.com/option.html#title，表白echarts，文档真的很详细，良心官网" target="_blank" rel="noopener">http://echarts.baidu.com/option.html#title，表白echarts，文档真的很详细，良心官网</a></p>
<p>demo代码如下<br>下钻到市级县级道理也是如此<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">mapfun(name)&#123; </span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.chartNum)</span><br><span class="line">      <span class="comment">// 注意文件路径 </span></span><br><span class="line">      <span class="keyword">this</span>.$http.get(<span class="string">'static/province/'</span>+name+<span class="string">'.json'</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123; </span><br><span class="line">        echarts.registerMap(name, res.body)</span><br><span class="line">        <span class="keyword">let</span> data = [];</span><br><span class="line">        res.body.features.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            data.push(&#123;</span><br><span class="line">                name:item.properties.name</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">this</span>.chartNum !== <span class="number">1</span> ? <span class="keyword">this</span>.myChart.dispose() : <span class="string">''</span>  <span class="comment">// 创建新实例之前一定要销毁上一个实例，否则重复多次点击无数的实例导致内存爆满</span></span><br><span class="line">        <span class="keyword">this</span>.chartNum++</span><br><span class="line">        <span class="keyword">this</span>.myChart = echarts.init(<span class="built_in">document</span>.getElementById(<span class="string">'myChart'</span>))</span><br><span class="line">        <span class="keyword">this</span>.myChart.showLoading()</span><br><span class="line">        <span class="keyword">this</span>.myChart.setOption(&#123;</span><br><span class="line">          title: &#123; <span class="comment">// 标题</span></span><br><span class="line">            text: <span class="string">"分布图"</span>,</span><br><span class="line">            left: <span class="string">"center"</span>,</span><br><span class="line">            padding: <span class="number">30</span>,</span><br><span class="line">            textStyle: &#123;</span><br><span class="line">              color: <span class="string">"#fff"</span>,</span><br><span class="line">              fontSize: <span class="string">"30"</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          visualMap: &#123; <span class="comment">// 热力图颜色显示</span></span><br><span class="line">            <span class="keyword">default</span>:<span class="string">'piecewise '</span>,</span><br><span class="line">            <span class="keyword">default</span>: <span class="number">5</span>,</span><br><span class="line">            calculable:<span class="literal">true</span>,</span><br><span class="line">            textStyle:&#123;</span><br><span class="line">              color: <span class="string">'#fef420'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            inRange: &#123;</span><br><span class="line">                color: [<span class="string">'#fef420'</span>, <span class="string">'#df383e'</span>,<span class="string">'#379fdf'</span>],</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          geo: [&#123; <span class="comment">// 地图</span></span><br><span class="line">            type: <span class="string">'map'</span>,  </span><br><span class="line">            map: name,  <span class="comment">// 地区名字，重要参数</span></span><br><span class="line">            itemStyle: &#123;</span><br><span class="line">                areaColor: <span class="string">"#d7bed9"</span>,</span><br><span class="line">                borderColor: <span class="string">"#111"</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            emphasis: &#123;</span><br><span class="line">              label:&#123;</span><br><span class="line">                show: <span class="literal">false</span></span><br><span class="line">              &#125;,</span><br><span class="line">              itemStyle: &#123;</span><br><span class="line">                areaColor: <span class="string">"#f5d4f8"</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            data: data,  <span class="comment">// 数据，重要参数</span></span><br><span class="line">            label: &#123;    <span class="comment">// 标签的显示</span></span><br><span class="line">              normal: &#123; <span class="attr">show</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">              emphasis: &#123; <span class="attr">show</span>: <span class="literal">true</span> &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;],</span><br><span class="line">          series: [&#123; <span class="comment">// 散点分布</span></span><br><span class="line">              roam: <span class="literal">true</span>,</span><br><span class="line">              type: name === <span class="string">'china'</span> ? <span class="string">"heatmap"</span> : <span class="string">"scatter"</span>, <span class="comment">// 中国地图下显示热力图，省级地图下显示精确分布点</span></span><br><span class="line">              coordinateSystem: <span class="string">"geo"</span>,</span><br><span class="line">              data: [[<span class="string">'116.347927'</span>, <span class="string">'39.948795'</span>, <span class="number">100</span>],</span><br><span class="line">                    [<span class="string">'100.06376'</span>, <span class="string">'30.554698'</span>, <span class="number">75</span>],</span><br><span class="line">                    [<span class="string">'104.05325'</span>, <span class="string">'29.646273'</span>, <span class="number">50</span>],[<span class="string">'104.05325'</span>, <span class="string">'25.646273'</span>, <span class="number">25</span>],[<span class="string">'94.05325'</span>, <span class="string">'30.646273'</span>, <span class="number">1</span>]],</span><br><span class="line">              blurSize: <span class="number">20</span>,</span><br><span class="line">              symbolSize: <span class="number">20</span>,</span><br><span class="line">              symbol: <span class="string">'arrow'</span>,  </span><br><span class="line">              minOpacity: <span class="number">0.1</span>,</span><br><span class="line">              maxOpacity: <span class="number">1</span>,</span><br><span class="line">          &#125;]</span><br><span class="line">          </span><br><span class="line">        &#125;) </span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123; </span><br><span class="line">           <span class="keyword">this</span>.myChart.hideLoading()</span><br><span class="line">        &#125;, <span class="number">1000</span>)</span><br><span class="line">        <span class="keyword">this</span>.myChart.on(<span class="string">'click'</span>, params =&gt; &#123; <span class="comment">// 点击函数</span></span><br><span class="line">          name === <span class="string">'china'</span> ? <span class="keyword">this</span>.mapfun(params.name) : <span class="keyword">this</span>.mapfun(<span class="string">'china'</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<p>欢迎留言交流  (´▽`ʃ♡ƪ)</p>
<p></p></div><div class="meta"><i class="iconfont iconweibiaoti--" title="阅读时长">2</i><i class="iconfont iconwenzi" title="字数">505</i><i class="iconfont iconshijian" title="创建时间">2018-08-15 09:35</i></div></article><article><a class="artititle" href="/2018/08/09/python_mysql/">python操作mysql/mysql增删查改语句</a><div class="content ellipse"><p></p><h1 id="PyMySQL安装-方法介绍"><a href="#PyMySQL安装-方法介绍" class="headerlink" title="PyMySQL安装/方法介绍"></a>PyMySQL安装/方法介绍</h1><p>PyMySQL是由python编写的，速度上比不上 MySQLdb，但是他安装非常方便同时也兼容 MySQL-python</p>
<p>pip install pymssql</p>
<h1 id="基本方法介绍"><a href="#基本方法介绍" class="headerlink" title="基本方法介绍"></a>基本方法介绍</h1><p>close():关闭此connect对象<br>commit():提交当前事务<br>rollback():取消当前事务<br>cursor():创建游标对象</p>
<h2 id="关于游标"><a href="#关于游标" class="headerlink" title="关于游标"></a>关于游标</h2><p>游标是一段私有的SQL工作区,也就是一段内存区域,用于暂时存放受SQL语句影响到的数据。通俗理解就是将受影响的数据暂时放到了一个内存区域的虚表中，而这个虚表就是游标。</p>
<p>也就是说在commit之前你操作的都是这个游标，操作错误你可以使用rollback()方法回滚，如果在增删改之后没有commit所有操作都是白搭</p>
<h2 id="操作游标的方法"><a href="#操作游标的方法" class="headerlink" title="操作游标的方法"></a>操作游标的方法</h2><p>close():关闭此游标对象<br>fetchone():得到结果集的下一行<br>fetchmany([size = cursor.arraysize]):得到结果集的下几行<br>fetchall():得到结果集中剩下的所有行<br>excute(sql[, args]):执行一个数据库查询或命令<br>excutemany(sql, args):执行多个数据库查询或命令</p>
<h1 id="现在上代码"><a href="#现在上代码" class="headerlink" title="现在上代码"></a>现在上代码</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="comment"># 连接mysql</span></span><br><span class="line"><span class="comment"># host为数据库的主机IP地址, port为MySQL的默认端口号, user为数据的用户名, password为数据库的登录密码, db为数据库的名称</span></span><br><span class="line">config = &#123;</span><br><span class="line">    <span class="string">'host'</span>: <span class="string">'localhost'</span>,</span><br><span class="line">    <span class="string">'port'</span>: <span class="number">3306</span>,</span><br><span class="line">    <span class="string">'user'</span>: <span class="string">'root'</span>,</span><br><span class="line">    <span class="string">'password'</span>: <span class="string">'123456'</span>,</span><br><span class="line">    <span class="string">'database'</span>: <span class="string">'reptiledata'</span></span><br><span class="line">&#125;</span><br><span class="line">db = pymysql.connect(**config)</span><br><span class="line">cursor = db.cursor() <span class="comment"># 建立游标对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------------------------------------表操作----------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 如果存在就删除表</span></span><br><span class="line">cursor.execute(<span class="string">"drop table if exists user"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新增表</span></span><br><span class="line">cursor.execute(<span class="string">"""create table if not exists user(</span></span><br><span class="line"><span class="string">                  id int auto_increment primary key,</span></span><br><span class="line"><span class="string">                  name varchar(5),</span></span><br><span class="line"><span class="string">                  sex  char(1),</span></span><br><span class="line"><span class="string">                  id_card  char(18),</span></span><br><span class="line"><span class="string">                  phone  varchar(14),</span></span><br><span class="line"><span class="string">                  address  varchar(12),</span></span><br><span class="line"><span class="string">                  create_time time)"""</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改自增长Id,数据库新增的数据会从1000开始但是原来的数据不会改变</span></span><br><span class="line">cursor.execute(<span class="string">'alter table user AUTO_INCREMENT=1000'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新增数据库表字段</span></span><br><span class="line">cursor.execute(<span class="string">'alter table user add plus varchar(8)'</span>)</span><br><span class="line"><span class="comment"># --------------------------插入数据-------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 批量插入数据</span></span><br><span class="line">cursor.execute(<span class="string">'alter table user drop plus'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 插入单条数据但因为后面用了db.rollback()回滚，所以此条数据不会被添加</span></span><br><span class="line">cursor.execute(<span class="string">"""insert into user(name, sex, id_card, phone, address)</span></span><br><span class="line"><span class="string">        values ('李四', '女', '511569845612354879', '10086', '数据不会被添加')"""</span>)</span><br><span class="line">db.rollback() </span><br><span class="line"></span><br><span class="line"><span class="comment"># 批量插入数据，如果不列出字段名mysql会按照顺序添加</span></span><br><span class="line">sql = <span class="string">"""insert into user(name, sex, id_card, phone, address)</span></span><br><span class="line"><span class="string">        values (%s, %s, %s, %s, %s)"""</span></span><br><span class="line">sql_data = [[<span class="string">'张三'</span>, <span class="string">'女'</span>, <span class="string">'511569845612354879'</span>, <span class="string">'10086'</span>, <span class="string">'太古里77号'</span>],</span><br><span class="line">            [<span class="string">'李四'</span>, <span class="string">'男'</span>, <span class="string">'511569845612354879'</span>, <span class="string">'10086'</span>, <span class="string">'太古里77号'</span>],</span><br><span class="line">            [<span class="string">'王麻子子'</span>, <span class="string">'男'</span>, <span class="string">'511569845612354879'</span>, <span class="string">'10086'</span>, <span class="string">'太古里66号'</span>],</span><br><span class="line">            [<span class="string">'张二'</span>, <span class="string">'女'</span>, <span class="string">'511569845612354879'</span>, <span class="string">'10086'</span>, <span class="string">'太古里77号'</span>],</span><br><span class="line">            [<span class="string">'李五'</span>, <span class="string">'男'</span>, <span class="string">'511569845612354879'</span>, <span class="string">'10086'</span>, <span class="string">'太古里88号'</span>],</span><br><span class="line">            [<span class="string">'王麻子'</span>, <span class="string">'女'</span>, <span class="string">'511569845612354879'</span>, <span class="string">'10086'</span>, <span class="string">'太古里99号'</span>]]</span><br><span class="line">cursor.executemany(sql, sql_data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------------------------------------查询数据-----------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># order by 对查询结果进行排序 select 字段1,字段2,字段3 from 表名 order by 字段 desc(降序)||asc(升序)</span></span><br><span class="line">cursor.execute(<span class="string">"select address,id from user order by id desc"</span>)</span><br><span class="line">select = cursor.fetchall()</span><br><span class="line">print(select)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 去重复查询 select distinct 字段 from 表名</span></span><br><span class="line">cursor.execute(<span class="string">"select distinct address from user"</span>)</span><br><span class="line">select = cursor.fetchall()</span><br><span class="line">print(select)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分页查询 limit select 字段1，字段2 from 表名 limit 初始位置，记录数</span></span><br><span class="line">cursor.execute(<span class="string">"select id, name, sex, id_card from user limit 3,6"</span>)</span><br><span class="line">select = cursor.fetchall()</span><br><span class="line">print(select)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 精准查询 in 只查找括号内的数据； not in 则相反</span></span><br><span class="line">cursor.execute(<span class="string">"select * from user where ID in (1001,1003)"</span>)</span><br><span class="line">select = cursor.fetchall()</span><br><span class="line">print(select)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 精准查询 between and 查找1001-1003范围内的数据；not between and 相反</span></span><br><span class="line">cursor.execute(<span class="string">"select * from user where ID between 1001 and 1003"</span>)</span><br><span class="line">select = cursor.fetchall()</span><br><span class="line">print(select)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模糊查询 like (% 代表任意字符 _ 代表单个字符)；not like相反</span></span><br><span class="line">cursor.execute(<span class="string">"select * from user where name like '_麻%'"</span>)</span><br><span class="line">select = cursor.fetchall()</span><br><span class="line">print(select)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多条件查询 and 关键字</span></span><br><span class="line">cursor.execute(<span class="string">"select * from user where sex='女' and address='太古里77号'"</span>)</span><br><span class="line">select = cursor.fetchall()</span><br><span class="line">print(select)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多条件查询 or 关键字 只需满足一个条件</span></span><br><span class="line">cursor.execute(<span class="string">"select * from user where name='王麻子子' or address='太古里77号' "</span>)</span><br><span class="line">select = cursor.fetchall()</span><br><span class="line">print(select)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------删除数据和更新数据 or,and,between and,like等关键字可以查询到多条数据然后批量删除或者更新-----------------------------------</span></span><br><span class="line"><span class="comment"># 删除数据</span></span><br><span class="line">cursor.execute(<span class="string">"delete from user where name='王麻子子' or address='太古里77号'"</span>)</span><br><span class="line"><span class="comment"># 数据库清空</span></span><br><span class="line">cursor.execute(<span class="string">"truncate table user"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新数据</span></span><br><span class="line">cursor.execute(<span class="string">"update user set name = '更新' where ID in (1005,1006)"</span>)</span><br><span class="line"></span><br><span class="line">cursor.close()  <span class="comment"># 关闭游标对象</span></span><br><span class="line">db.commit()  <span class="comment"># 提交操作</span></span><br><span class="line">db.close()  <span class="comment"># 关闭数据库</span></span><br></pre></td></tr></table></figure>
<p>欢迎留言交流  (´▽`ʃ♡ƪ)</p>
<p></p></div><div class="meta"><i class="iconfont iconweibiaoti--" title="阅读时长">4</i><i class="iconfont iconwenzi" title="字数">1k</i><i class="iconfont iconshijian" title="创建时间">2018-08-09 15:00</i></div></article><div id="paginator"><a class="extend prev" rel="prev" href="/archives/page/2/">Prev</a><a class="page-number" href="/archives/">1</a><a class="page-number" href="/archives/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/archives/page/4/">4</a><a class="page-number" href="/archives/page/5/">5</a><a class="extend next" rel="next" href="/archives/page/4/">Next</a></div></div><script>document.getElementById('arshow').onclick = function() {
    document.getElementById('list_archives').style = 'opacity: 0;display: none'
    document.getElementById('normalposts').style = 'opacity: 0;display: block'
    setTimeout(() => {
        document.getElementById('normalposts').style.opacity = '1'                        
    }, 100);
}
document.getElementById('poshow').onclick = function() {
    document.getElementById('normalposts').style = 'opacity: 0;display: none'
    document.getElementById('list_archives').style = 'opacity: 1;display: block'
}</script></div><link rel="stylesheet" href="/css/partial/footer.css"><div class="footer"><p><span>Copyright © 2017 - 2019  </span><a href="http://www.beian.miit.gov.cn/">蜀ICP备19024124号</a></p><p>Powered by <a href="https://hexo.io/zh-cn/" target="_blank">Hexo</a> Theme by <a href="https://github.com/Tong-H/hexo-theme-energy" target="_blank">ENERGY</a></p><p><i class="iconfont iconchakan"><span>本站总访问量</span><span id="busuanzi_container_site_pv">  <span id="busuanzi_value_site_pv"></span> </span></i><i class="iconfont iconabout"><span>本站访客数</span><span id="busuanzi_container_site_uv">  <span id="busuanzi_value_site_uv"></span> </span></i></p></div></div></div><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>var _hmt = _hmt || [];(function(){var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?a4d08c5088ca0d4b18c14260c9ca89a1";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})()
window.onbeforeunload = function (event) {
    debugger
}</script></body></html>